<?php
 namespace app\index\controller; use app\index\model\Dropdowns; use think\Db; use app\index\logic\Dd as DdLogic; use app\index\logic\Redis as RedisLogic; class Dd extends Common { const GLOBAL_INDEX_VIEW = 1; const GLOBAL_PARTNERS_VIEW = 2; const GLOBAL_ENTERPRISES_VIEW = 3; public function index($page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x66\x75\156\x64\137\151\x64", $order = "\x61\163\143", $view = self::GLOBAL_INDEX_VIEW) { goto zKWMu; gBlD9: $ddLogic = DdLogic::newObj(); goto ZXF7f; zKWMu: if (!request()->isGet()) { goto SvBi9; } goto ab6Q2; ZXF7f: return json($ddLogic->load($page, $rows, $sort, $order)); goto EE3TB; tIX7i: SvBi9: goto gBlD9; tNVh8: return $this->fetch(); goto tIX7i; ab6Q2: $urlHrefs = ["\x69\156\144\x65\170" => url("\x69\x6e\144\145\x78\x2f\x44\x64\x2f\151\x6e\x64\x65\170")]; goto nxhGo; nxhGo: $this->assign("\165\x72\154\110\162\145\146\x73", $urlHrefs); goto ZukgS; ZukgS: $this->assign("\166\151\145\167", $view); goto tNVh8; EE3TB: } public function partners($fundId) { goto RfzhV; exZ8z: $index = 0; goto SDTEd; SDTEd: foreach ($records as $record) { goto T9H42; f8ybO: w3i6c: goto ym30J; b2Eu4: $amount = $record["\x61\155\157\165\156\x74"]; goto e6Xi1; oF8DV: $percent = intval($fundSize) ? round($amount / $fundSize * 100, 2) . "\45" : ''; goto GUm8t; T9H42: $pId = $record["\160\x5f\151\144"]; goto eSMud; eSMud: $fpId = $record["\146\x70\x5f\151\144"]; goto b2Eu4; GUm8t: $partners[] = ["\x69\x6e\144\x65\x78" => ++$index, "\156\141\155\145" => $record["\156\x61\155\x65"], "\x61\155\x6f\x75\156\x74" => round($record["\141\x6d\157\165\156\x74"] / 10000, 2), "\x70\x61\x69\144\x5f\141\155\157\165\156\164" => round($paidAmount / 10000, 2), "\160\x65\x72\x63\145\156\x74" => $percent]; goto f8ybO; M2XkW: $fundSize = Db::table("\146\165\156\144\x73")->where(["\x66\x75\156\x64\137\151\x64" => $fundId])->value("\163\x69\x7a\145"); goto oF8DV; e6Xi1: $paidAmount = Db::table("\x66\165\156\144\x73\x5f\160\x61\162\164\156\145\x72\163")->alias("\106\x50")->join("\x66\165\156\x64\x73\x5f\x70\141\162\164\x6e\x65\x72\x73\137\160\x61\x69\144\40\106\x50\120", "\x46\120\56\x66\x70\137\x69\144\x3d\x46\120\x50\x2e\x66\160\137\x69\144")->join("\146\165\x6e\144\163\137\146\x69\x6e\141\156\143\x65\x5f\x63\157\x6e\x74\162\151\x62\x75\x74\145\163\x20\106\106\x43", "\106\120\120\x2e\x66\x66\143\137\x69\144\75\x46\106\103\x2e\146\x66\x63\137\x69\x64")->where("\106\120\56\146\x70\137\x69\x64", $fpId)->sum("\106\106\x43\56\x61\155\x6f\x75\x6e\164"); goto M2XkW; ym30J: } goto rzaA8; RfzhV: $partners = []; goto otbbS; MuweR: $this->assign("\160\x61\x72\x74\x6e\145\x72\x73", $partners); goto nNzIt; nNzIt: return $this->fetch(); goto gZBYm; rzaA8: GfBbI: goto MuweR; otbbS: $records = Db::table("\146\x75\156\144\163\137\160\x61\x72\164\156\x65\x72\x73")->alias("\x46\x50")->join("\160\x61\x72\x74\156\145\162\163\40\120", "\x50\x2e\160\137\x69\144\75\x46\x50\56\x70\x5f\x69\x64")->where(["\x46\120\x2e\146\x75\x6e\144\x5f\151\144" => $fundId])->field("\x46\x50\56\x66\160\x5f\x69\x64\x2c\40\106\x50\x2e\141\x6d\157\x75\x6e\164\x2c\x20\x50\56\52")->select(); goto exZ8z; gZBYm: } public function enterprises($fundId) { goto mDh97; XKvRS: $stages = Dropdowns::getItems("\146\151\x6e\x61\x6e\143\151\x6e\x67\x5f\x73\164\x61\x67\x65", true); goto S9TnD; gm30u: foreach ($records as $record) { goto nHE1A; E4348: $enterprise["\x61\x66\x74\145\162\137\x66\151\156\141\156\x63\x69\156\147\x5f\x69\x6e\146\x6f"] = $jsonData["\x61\x66\164\x65\x72\137\146\151\x6e\141\x6e\x63\x69\x6e\147\x5f\x69\x6e\146\157"]; goto NDTi4; GQVpE: $enterprise["\x63\x6f\137\151\156\166\145\x73\164\157\x72\x73"] = $jsonData["\x63\x6f\x5f\x69\x6e\166\x65\163\x74\157\162\163"]; goto QfrKG; QfrKG: EP_Mp: goto Lca6H; Zm8Sb: if (isset($jsonData["\151\163\137\164\x6f\x74\x61\x6c\x6c\171\x5f\145\170\x69\163\164"]) && $jsonData["\x69\x73\137\x74\157\164\141\154\x6c\x79\x5f\145\x78\151\x73\164"] == 1) { goto lPAho; } goto U0Grs; fhHXV: jLeZC: goto cjWtA; irElq: mg_ST: goto UrwNO; n3diJ: $enterprise["\141\x66\164\145\x72\x5f\x66\151\x6e\141\156\143\151\x6e\147\x5f\151\x6e\x66\x6f"] = ''; goto UTvbV; HwWV1: $enterprise["\x73\x74\141\147\x65"] = $record["\146\151\x6e\x61\156\143\x69\156\x67\137\x73\x74\141\147\x65"] ? $stages[$record["\146\x69\156\141\x6e\x63\x69\156\x67\x5f\x73\164\141\x67\145"]] : "\xe6\234\252\xe6\x8c\x87\xe5\xae\232\xe8\275\256\xe6\254\xa1"; goto vaTvq; aaETr: $enterprise["\x65\170\x69\x74\137\x77\x61\x79"] = ''; goto Z2iVX; NLqd3: $enterprise["\x70\162\x6f\x6a\145\x63\164\x5f\156\141\x6d\x65"] = $jsonData["\x70\x72\x6f\x6a\145\143\x74\x5f\x6e\141\155\145"]; goto N0kH0; yGzbt: if (!$jsonStr) { goto mg_ST; } goto IYzOV; HjV7p: $enterprise["\x6e\x6f\x77\137\150\157\x6c\x64\x5f\x73\x74\157\x63\153\x5f\166\x61\154\165\145"] = ''; goto aaETr; f21z0: $enterprise["\x63\x6f\137\x69\x6e\166\145\x73\164\157\x72\163"] = ''; goto NchYL; cjWtA: $enterprise["\151\x73\x5f\x64\x69\x72\145\x63\164\157\162\x5f\x70\x6f\163\x69\x74\x69\x6f\156"] = "\xe6\x98\xaf"; goto oMbg2; Kmh0i: if (isset($jsonData["\x69\163\137\x6c\145\x61\x64\137\x69\x6e\166\x65\163\x74\155\x65\156\164"]) && $jsonData["\151\163\137\154\145\141\144\x5f\x69\x6e\x76\x65\163\x74\155\x65\x6e\164"] == 1) { goto qlYe9; } goto n6lcH; Z2iVX: $enterprise["\x69\x73\137\164\x6f\x74\141\154\154\x79\137\145\170\151\x73\x74"] = ''; goto Slbqh; trTE3: if (!isset($jsonData["\160\162\x6f\152\x65\143\164\137\156\141\155\145"])) { goto zjjZG; } goto NLqd3; GzuPl: $enterprise["\156\x6f\x77\137\x68\157\154\144\137\163\x74\x6f\x63\x6b\137\166\x61\154\165\145"] = $jsonData["\156\x6f\x77\x5f\150\x6f\x6c\144\x5f\x73\x74\x6f\x63\153\x5f\x76\141\154\165\145"]; goto f2fij; QtFYm: goto dR8Mi; goto fhHXV; iQfCq: lPAho: goto VsNKM; NDTi4: fnMGw: goto rhkIV; oOpl6: $enterprise["\151\x6e\x64\145\x78"] = ++$index; goto IpyTZ; eEu2u: K9rhW: goto FvWe5; YOzl_: $enterprise["\151\163\x5f\x64\151\162\145\x63\x74\157\x72\137\160\157\x73\151\x74\x69\157\156"] = "\345\220\xa6"; goto QtFYm; gtdoq: $enterprise["\151\x72\x72"] = ''; goto pdtWu; UCXgk: $enterprise["\x65\170\x69\164\137\x77\x61\171"] = $jsonData["\x65\170\x69\164\137\x77\141\x79"]; goto CKwp7; M5_Ny: $enterprise["\162\145\164\165\162\156\x5f\x6d\165\x6c\x74\x69\x70\x6c\145"] = ''; goto gtdoq; FvWe5: if (!isset($jsonData["\x64\151\x76\x69\x64\x65\x6e\x64\x5f\x72\145\164\165\x72\156\137\x61\x6d\x6f\165\156\x74"])) { goto P7nsD; } goto uqL49; gyL4z: $enterprise["\151\163\137\154\x65\141\144\137\x69\156\166\145\163\x74\x6d\145\156\164"] = "\346\230\257"; goto cK2nS; yMHlb: $enterprise["\156\157\x77\x5f\163\x74\x6f\x63\153\x5f\x72\x61\164\x69\x6f"] = $jsonData["\x6e\157\x77\137\163\x74\x6f\143\153\x5f\162\141\164\151\x6f"]; goto WZ4oI; uqL49: $enterprise["\144\x69\x76\151\x64\x65\x6e\144\x5f\x72\145\x74\x75\x72\156\x5f\x61\155\x6f\165\156\164"] = $jsonData["\144\x69\x76\151\144\x65\x6e\144\137\162\145\x74\x75\x72\156\x5f\141\x6d\x6f\x75\156\164"]; goto e3SJS; OipSz: $enterprise["\162\x65\144\151\163\x5f\x6b\x65\x79"] = $redisKey; goto r03_R; NchYL: $enterprise["\151\x73\x5f\x64\x69\x72\x65\x63\x74\x6f\x72\x5f\x70\x6f\x73\x69\164\x69\x6f\x6e"] = ''; goto n3diJ; U0Grs: $enterprise["\x69\x73\137\164\x6f\164\141\x6c\154\x79\137\x65\x78\x69\163\164"] = "\xe5\220\xa6"; goto zEUPd; f2fij: wvk6K: goto Xetir; ygK8w: PWvai: goto qsxyW; nB9VD: if (!isset($jsonData["\x63\x6f\x5f\151\156\x76\x65\163\164\x6f\x72\x73"])) { goto EP_Mp; } goto GQVpE; WZ4oI: rI_E0: goto x9jaX; zTLMz: $investmentId = $record["\x69\x6e\x76\145\x73\x74\x6d\145\156\164\137\x69\x64"]; goto oOpl6; e77RU: djx95: goto Kmh0i; VsNKM: $enterprise["\151\163\x5f\x74\157\164\141\x6c\x6c\171\x5f\145\x78\151\163\164"] = "\xe6\x98\257"; goto eEu2u; oMbg2: dR8Mi: goto eNdss; x9jaX: if (!isset($jsonData["\156\157\x77\x5f\x68\x6f\x6c\x64\137\163\x74\157\x63\153\137\x76\x61\154\x75\145"])) { goto wvk6K; } goto GzuPl; vaTvq: $enterprise["\x61\x6d\x6f\x75\156\x74"] = round($record["\141\155\x6f\165\156\164"] / 10000, 2); goto ngBE_; eNdss: if (!isset($jsonData["\141\146\164\x65\x72\137\x66\151\156\141\156\143\151\156\147\137\x69\156\x66\x6f"])) { goto fnMGw; } goto E4348; f7tM4: $enterprise["\x72\x65\x67\151\x73\x74\x65\x72\x5f\x70\x6c\141\143\x65"] = ''; goto viX_D; JTX08: $enterpriseId = $record["\x65\156\164\145\162\160\x72\x69\x73\145\137\x69\144"]; goto zTLMz; ngBE_: $enterprise["\x70\157\x73\x74\x5f\x69\x6e\x76\145\x73\x74\155\x65\156\x74\x5f\x76\141\x6c\x75\141\164\x69\157\x6e"] = round($record["\151\x6e\x69\x74\x69\141\x6c\x5f\166\x61\x6c\x75\141\x74\151\x6f\156"] / 10000, 2); goto A9966; A9966: $enterprise["\163\164\157\143\153\x5f\162\141\x74\x69\157"] = round($record["\163\164\157\143\153\137\162\x61\164\x69\x6f"], 2) . "\x25"; goto f7tM4; CKwp7: v2Sig: goto Zm8Sb; F6KJD: xQj9E: goto irElq; yoToo: if (!isset($jsonData["\162\x65\x67\151\x73\x74\145\162\x5f\160\154\x61\x63\x65"])) { goto djx95; } goto PPweB; nHE1A: $enterprise = []; goto JTX08; zEUPd: goto K9rhW; goto iQfCq; e3SJS: P7nsD: goto ffWJP; uVizG: $enterprise["\x70\162\x6f\x6a\145\x63\x74\137\x6e\141\x6d\x65"] = ''; goto HwWV1; qsxyW: if (!isset($jsonData["\x69\x72\x72"])) { goto xQj9E; } goto zwgaQ; pdtWu: $redisKey = RedisLogic::genDdKey($fundId, $enterpriseId); goto OipSz; lLELc: qlYe9: goto gyL4z; Lca6H: if (isset($jsonData["\151\x73\137\x64\x69\162\x65\143\x74\x6f\162\x5f\x70\x6f\163\x69\x74\x69\x6f\x6e"]) && $jsonData["\151\x73\137\x64\x69\x72\145\143\164\x6f\162\x5f\160\x6f\163\151\164\151\x6f\156"] == 1) { goto jLeZC; } goto YOzl_; vD2PO: $enterprise["\x6e\x6f\167\137\x73\164\x6f\143\x6b\x5f\x72\141\x74\x69\157"] = ''; goto HjV7p; zwgaQ: $enterprise["\x69\162\x72"] = $jsonData["\151\x72\162"]; goto F6KJD; IYzOV: $jsonData = json_decode($jsonStr, true); goto trTE3; rhkIV: if (!isset($jsonData["\156\x6f\x77\137\163\x74\157\x63\x6b\x5f\162\x61\164\151\x6f"])) { goto rI_E0; } goto yMHlb; r03_R: $jsonStr = $redisLogic->getData($redisKey); goto yGzbt; hiMnz: $enterprise["\162\145\164\x75\162\156\137\155\165\154\x74\151\160\x6c\x65"] = $jsonData["\162\145\x74\165\162\156\137\x6d\x75\154\x74\x69\160\x6c\145"]; goto ygK8w; viX_D: $enterprise["\151\x73\x5f\x6c\x65\141\144\137\x69\156\166\x65\163\164\x6d\145\x6e\164"] = ''; goto f21z0; UTvbV: $enterprise["\154\x61\164\145\x73\x74\x5f\166\141\154\165\x61\164\151\157\156"] = $record["\154\141\x74\x65\163\x74\x5f\x76\141\154\165\x61\x74\151\x6f\156"] > 0 ? round($record["\x6c\x61\164\145\163\x74\x5f\x76\x61\x6c\165\x61\164\x69\157\156"] / 10000, 2) : ''; goto vD2PO; n6lcH: $enterprise["\x69\x73\x5f\x6c\145\x61\144\x5f\151\x6e\x76\145\x73\164\x6d\145\x6e\x74"] = "\345\220\246"; goto ox7Is; Slbqh: $enterprise["\144\x69\x76\x69\x64\x65\x6e\144\137\162\x65\164\165\162\x6e\x5f\x61\x6d\x6f\165\156\x74"] = ''; goto M5_Ny; UrwNO: $enterprises[] = $enterprise; goto vJDbQ; Xetir: if (!isset($jsonData["\x65\x78\x69\x74\x5f\167\141\x79"])) { goto v2Sig; } goto UCXgk; IpyTZ: $enterprise["\x6e\x61\155\x65"] = $record["\x6e\x61\155\x65"]; goto uVizG; N0kH0: zjjZG: goto yoToo; vJDbQ: DeQdh: goto XFUad; ox7Is: goto g1qgS; goto lLELc; ffWJP: if (!isset($jsonData["\162\145\164\165\x72\x6e\137\x6d\x75\x6c\x74\151\160\154\x65"])) { goto PWvai; } goto hiMnz; PPweB: $enterprise["\162\x65\147\x69\x73\x74\x65\162\137\x70\154\x61\x63\x65"] = $jsonData["\162\x65\147\x69\163\164\145\x72\137\160\x6c\x61\143\145"]; goto e77RU; cK2nS: g1qgS: goto nB9VD; XFUad: } goto GGLzP; GGLzP: ZK9FA: goto MXAry; S9TnD: $index = 0; goto gm30u; mDh97: $enterpriseLogic = \app\index\logic\Enterprise::I(); goto FIMZn; FIMZn: $redisLogic = RedisLogic::I(); goto IQ7fi; MXAry: $this->assign("\145\x6e\x74\x65\x72\x70\162\x69\163\x65\x73", $enterprises); goto G71E_; fAnbv: $records = $enterpriseLogic->getInvestEnterprise($fundId); goto XKvRS; IQ7fi: $enterprises = []; goto fAnbv; G71E_: return $this->fetch(); goto v9OlI; v9OlI: } public function enterpriseSave($redisKey) { goto yCvJD; FQPtl: z9LV7: goto UWm_7; ajatK: if (!$this->request->isGet()) { goto ZUP1_; } goto I0pwt; FqqJt: $dd = json_decode($dd, true); goto FQPtl; yCvJD: $redisLogic = RedisLogic::I(); goto ajatK; g_1OG: ZUP1_: goto tEsxx; NHNID: goto z9LV7; goto Td2ZS; Td2ZS: EiouI: goto FqqJt; Eysic: if ($dd) { goto EiouI; } goto iU22Y; wW9oc: return $this->fetch(); goto g_1OG; UWm_7: $this->assign("\x64\144", $dd); goto wW9oc; iU22Y: $dd = []; goto NHNID; I0pwt: $dd = $redisLogic->getData($redisKey); goto Eysic; tEsxx: } }
