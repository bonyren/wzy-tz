<?php
 namespace app\index\controller; use think\Controller; use think\Log; use think\Debug; use think\Request; use app\index\logic\Defs; class ChangeLogs extends Common { public function index($externalId, $category = \app\index\logic\ChangeLogs::CHANGE_LOG_ALL_CATEGORY, $readOnly = 0, $search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\x64", $order = "\144\x65\x73\x63") { goto xVzGS; b03rO: $urlHrefs = ["\x69\x6e\144\145\x78" => url("\151\x6e\x64\145\170\57\103\x68\141\156\147\x65\114\157\x67\x73\57\151\156\x64\145\x78", ["\x65\170\164\145\162\x6e\x61\x6c\x49\144" => $externalId, "\x63\x61\164\145\x67\x6f\162\x79" => $category]), "\141\144\x64" => url("\x69\156\144\x65\170\x2f\x43\150\141\x6e\x67\145\114\157\147\163\x2f\141\144\x64", ["\x65\x78\x74\x65\x72\x6e\x61\154\x49\x64" => $externalId, "\143\141\164\x65\147\x6f\x72\171" => $category]), "\145\x64\151\164" => url("\x69\156\144\x65\x78\x2f\103\150\x61\156\147\145\x4c\x6f\147\x73\57\x65\x64\151\164"), "\144\145\154\145\x74\x65" => url("\x69\x6e\144\145\170\57\103\150\x61\156\147\145\x4c\157\x67\163\x2f\144\145\154\x65\x74\x65"), "\x61\164\164\x61\x63\x68\155\x65\x6e\164\163" => url("\x69\x6e\144\145\170\x2f\125\160\x6c\x6f\x61\x64\57\166\151\145\x77\x41\164\x74\141\143\150\145\x73", ["\141\x74\x74\141\x63\150\155\145\x6e\x74\124\171\160\x65" => \app\index\logic\Upload::ATTACH_FUND_CHANGE_LOGS, "\x75\151\123\164\x79\154\x65" => \app\index\controller\Upload::ATTACHES_UI_DATAGRID_STYLE])]; goto azhjI; gXPUp: $this->assign("\162\145\x61\144\x4f\x6e\154\171", $readOnly); goto BmmRW; KqRlR: $changeLogsLogic = \app\index\logic\ChangeLogs::newObj(); goto HxeA5; BmmRW: $this->assign("\164\x79\160\x65", \app\index\logic\ChangeLogs::$changeLogCategoryTypeDefs[$category]); goto WmtYf; xVzGS: if (!request()->isGet()) { goto a26VA; } goto b03rO; yJ3jj: a26VA: goto KqRlR; azhjI: $this->assign("\x75\x72\154\x48\162\145\x66\x73", $urlHrefs); goto gXPUp; kaAZN: $this->assign("\165\x6e\151\161\x69\144", generateUniqid()); goto Q9zbl; WmtYf: $this->assign("\x74\151\x74\x6c\145", \app\index\logic\ChangeLogs::$changeLogCategoryDefs[$category]); goto kaAZN; Q9zbl: return $this->fetch(); goto yJ3jj; HxeA5: return json($changeLogsLogic->load($externalId, $category, $search, $page, $rows, $sort, $order)); goto OJArJ; OJArJ: } public function add($externalId, $category) { goto qrJDY; JSxWq: hkVok: goto GP9gh; hwRtQ: $this->assign("\165\162\x6c\110\162\145\x66\x73", $urlHrefs); goto BjcVo; fgwdu: if ($result) { goto X536f; } goto mSPLk; BjcVo: $this->assign("\x74\x79\x70\x65", \app\index\logic\ChangeLogs::$changeLogCategoryTypeDefs[$category]); goto W5Koh; G_aux: $changeLogsLogic = \app\index\logic\ChangeLogs::newObj(); goto vQtbg; ceYhJ: return $this->fetch(); goto JOJ19; vQtbg: $result = $changeLogsLogic->add($externalId, $category, $infos); goto fgwdu; K8lg0: goto hkVok; goto pECjQ; JOJ19: Aeq3G: goto fWtZx; W5Koh: $this->assign("\x75\156\x69\x71\151\x64", generateUniqid()); goto ceYhJ; qrJDY: if (!request()->isGet()) { goto Aeq3G; } goto DhSWp; pECjQ: X536f: goto mgLMh; mgLMh: return ajaxSuccess("\xe6\210\220\xe5\x8a\237"); goto JSxWq; mSPLk: return ajaxError("\345\xa4\261\350\xb4\xa5"); goto K8lg0; fWtZx: $infos = input("\160\157\163\164\56\x69\x6e\146\157\163\x2f\141"); goto G_aux; DhSWp: $urlHrefs = ["\141\x74\x74\x61\x63\150\x6d\145\x6e\x74\x73" => url("\x69\x6e\x64\145\170\x2f\x55\160\154\x6f\x61\x64\57\x61\164\x74\141\x63\150\x65\x73", ["\x61\x74\164\x61\143\150\x6d\x65\156\x74\124\x79\160\x65" => \app\index\logic\Upload::ATTACH_FUND_CHANGE_LOGS, "\x65\x78\164\x65\x72\156\x61\154\x49\144" => 0, "\165\151\123\164\171\x6c\145" => \app\index\controller\Upload::ATTACHES_UI_DATAGRID_STYLE, "\x63\x61\x6c\154\142\x61\x63\x6b" => "\x63\150\141\x6e\x67\x65\114\x6f\x67\163\101\x64\x64\115\x6f\x64\x75\154\x65\x2e\157\156\x41\164\x74\x61\143\150\x6d\x65\x6e\164\x73\x55\x70\154\x6f\x61\144\145\144"])]; goto hwRtQ; GP9gh: } public function edit($id) { goto FayhQ; Pklyj: BSmsG: goto XMU9p; OTqX8: $this->assign("\142\151\156\x64\x56\141\x6c\x75\x65\163", $bindValues); goto j7Nk0; ZihLo: return ajaxError("\xe5\244\261\350\264\xa5"); goto TM5d0; FayhQ: $changeLogsLogic = \app\index\logic\ChangeLogs::newObj(); goto Lem9i; sXLR9: return $this->fetch(); goto Pklyj; j7Nk0: $this->assign("\164\x79\160\145", \app\index\logic\ChangeLogs::$changeLogCategoryTypeDefs[$infos["\143\x61\164\145\147\x6f\162\171"]]); goto LJFRI; PvG6L: return ajaxSuccess("\346\210\220\345\x8a\x9f"); goto JWrgQ; TM5d0: goto RL8eh; goto sC19Y; sC19Y: OpgnE: goto PvG6L; jsy6P: EqxxT: goto FpEPk; Lem9i: if (!request()->isGet()) { goto BSmsG; } goto bGVC9; JWrgQ: RL8eh: goto Ignj5; LJFRI: $this->assign("\165\156\151\x71\x69\x64", generateUniqid()); goto sXLR9; Iovlt: if ($infos) { goto EqxxT; } goto krGqa; krGqa: return $this->fetch("\x63\x6f\155\x6d\x6f\x6e\57\145\x72\x72\157\x72"); goto jsy6P; F0Hl8: $infos = $changeLogsLogic->getInfos($id); goto Iovlt; XMU9p: $infos = input("\160\157\163\x74\56\151\x6e\x66\x6f\163\x2f\x61"); goto dwX9Y; X521V: if ($result) { goto OpgnE; } goto ZihLo; bGVC9: $urlHrefs = ["\x61\164\164\141\x63\x68\155\145\156\x74\x73" => url("\151\x6e\x64\x65\x78\57\125\160\154\157\141\x64\x2f\x61\164\164\x61\143\150\x65\163", ["\x61\x74\x74\x61\x63\x68\x6d\145\156\164\x54\x79\x70\x65" => \app\index\logic\Upload::ATTACH_FUND_CHANGE_LOGS, "\x65\x78\x74\x65\162\156\141\154\x49\144" => $id, "\165\151\123\x74\x79\154\x65" => \app\index\controller\Upload::ATTACHES_UI_DATAGRID_STYLE])]; goto y67Td; dwX9Y: $result = $changeLogsLogic->edit($id, $infos); goto X521V; FpEPk: $bindValues = ["\x69\x6e\146\157\163" => $infos]; goto OTqX8; y67Td: $this->assign("\165\162\x6c\x48\162\145\x66\163", $urlHrefs); goto F0Hl8; Ignj5: } public function delete($id) { goto o2sTI; JH5Jh: $result = $changeLogsLogic->delete($id); goto GShFM; RPQcS: goto yGFUL; goto pECgS; pECgS: rOwYC: goto FrYsL; FrYsL: return ajaxSuccess("\346\x88\x90\xe5\x8a\x9f"); goto meO_W; GShFM: if ($result) { goto rOwYC; } goto NTtmr; o2sTI: $changeLogsLogic = \app\index\logic\ChangeLogs::newObj(); goto JH5Jh; NTtmr: return ajaxError("\345\xa4\xb1\350\xb4\245"); goto RPQcS; meO_W: yGFUL: goto VNEE0; VNEE0: } }
