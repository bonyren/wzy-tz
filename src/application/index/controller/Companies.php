<?php
 namespace app\index\controller; use app\index\logic\Upload; use think\Db; use think\Log; class Companies extends Common { public function index($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS) { goto jyT1r; iNuvU: sEBya: goto yYXMy; fKswv: UXGyo: goto FboC4; EPmey: if (!empty($total)) { goto sEBya; } goto m9sOS; s2hAD: $where["\x6e\x61\x6d\x65"] = ["\154\151\x6b\145", "\x25{$search["\156\141\155\145"]}\x25"]; goto Ukhfl; jyT1r: if (!$this->request->isGet()) { goto UXGyo; } goto HfUCv; yYXMy: $rows = Db::table("\143\157\155\x70\141\x6e\151\145\x73")->field("\151\144\x2c\156\141\155\145\x2c\143\x6f\x6e\164\162\157\x6c\x6c\x65\x72\x2c\151\x6e\x74\x72\x6f\x64\165\x63\x74\x69\x6f\x6e\x2c\x61\163\163\151\147\156\145\162")->where($where)->page($page, $rows)->order("\x69\x64\x20\x64\x65\x73\x63")->select(); goto l2kB5; FboC4: $where = []; goto POMIl; l2kB5: return json(["\164\x6f\164\x61\x6c" => $total, "\162\157\167\x73" => $rows, "\165\163\x65\x72\163" => \app\index\logic\Admins::I()->getAllUsers()]); goto HzQJf; HfUCv: return $this->fetch(); goto fKswv; Ukhfl: gzil9: goto KuM83; m9sOS: return json([]); goto iNuvU; POMIl: if (emptyInArray($search, "\156\141\x6d\145")) { goto gzil9; } goto s2hAD; KuM83: $total = Db::table("\x63\157\155\x70\141\156\151\145\x73")->where($where)->count(); goto EPmey; HzQJf: } public function crawl($code) { goto dOZf6; JrBwd: $http = new \GuzzleHttp\Client(); goto jV0Q8; jV0Q8: try { goto cON6o; SS88m: if ($data["\x64\x61\164\x61"]["\x63\x6f\x6d\160\141\156\171"]) { goto soVoF; } goto j1wvO; LCQl4: $data = json_decode($data, true); goto ugLeT; IDoYJ: soVoF: goto as8LZ; itPYE: return []; goto uQ6z5; j1wvO: return []; goto IDoYJ; cON6o: $response = $http->get("\x68\x74\164\160\x73\x3a\x2f\57\163\164\157\x63\x6b\x2e\170\x75\x65\161\x69\165\56\143\157\155\57\x76\x35\x2f\x73\x74\157\143\x6b\x2f\x66\61\x30\x2f\143\156\x2f\x63\157\155\160\141\156\x79\x2e\152\163\157\x6e\x3f\x73\x79\155\142\157\154\x3d" . trim($code), ["\143\165\x72\154" => [CURLOPT_SSL_VERIFYPEER => false], "\x68\145\141\144\x65\x72\163" => ["\x43\157\x6f\x6b\151\145" => "\141\x63\167\x5f\x74\143\x3d\62\67\x36\60\70\62\x36\x31\x31\66\65\x31\x36\x37\x33\65\x30\x34\62\60\70\67\x32\64\62\145\146\63\x61\63\67\x31\x33\71\62\x35\x30\61\66\x33\x37\61\x64\x66\x38\x64\x38\x34\x36\144\66\64\64\x37\64\146\x62\143\x65\x64\x62\x31\73\x20\x78\161\x5f\x61\137\164\x6f\153\145\x6e\75\145\70\x31\x31\x39\x66\67\x64\67\x61\60\65\x30\143\x64\x62\x66\x61\70\62\x32\x66\141\x30\x64\141\x34\x64\x65\x35\142\x65\x63\x31\x65\x65\x30\x64\x63\x37\x3b\x20\x78\161\x61\x74\x3d\145\x38\61\61\x39\146\x37\144\x37\x61\x30\x35\60\143\x64\142\x66\x61\70\x32\x32\146\141\60\144\x61\64\144\x65\65\x62\x65\143\x31\145\145\x30\144\143\67\73\x20\170\x71\137\162\x5f\164\x6f\x6b\145\156\x3d\x62\x61\142\61\x32\65\65\x39\x34\141\141\142\x33\x65\x66\63\61\x33\144\65\141\x36\x32\60\x61\60\145\x39\141\x61\x31\x64\x63\66\71\143\x34\x32\x62\142\73\40\x78\161\137\151\144\137\x74\x6f\153\x65\x6e\x3d\145\x79\x4a\60\x65\130\x41\151\x4f\x69\112\113\126\61\121\151\x4c\x43\x4a\150\x62\107\x63\x69\x4f\x69\x4a\x53\x55\172\111\x31\116\x69\x4a\71\56\x65\x79\112\x31\x61\x57\121\x69\x4f\151\60\170\114\x43\x4a\160\x63\x33\115\151\x4f\151\112\61\x59\171\x49\x73\x49\155\x56\x34\x63\103\x49\66\115\124\131\x31\116\104\x41\x7a\117\x54\x63\172\x4d\123\x77\151\131\63\x52\x74\x49\x6a\157\170\x4e\x6a\125\170\x4e\x6a\143\x7a\116\x44\147\x77\117\x44\111\x78\114\103\112\x6a\x61\127\x51\x69\117\151\x4a\153\x4f\127\121\x77\142\x6a\122\102\x57\156\126\167\111\x6e\60\56\x46\145\60\x72\x33\123\167\x68\102\60\147\117\x4f\x76\x30\125\x75\x67\142\x6f\x73\107\102\122\x66\147\x44\132\x51\146\x76\x43\102\115\x52\160\116\x48\157\x4d\151\120\x58\x42\x4b\x69\x72\x4a\107\146\x38\55\120\x54\x42\115\131\x4f\x4c\150\102\x58\144\x73\x74\150\103\x53\60\x79\63\x4a\164\x4c\x53\153\x46\x64\x64\170\154\x78\x33\x5f\x6e\x49\107\165\x4f\123\104\172\x73\x68\125\61\122\x55\101\x4d\116\63\x71\160\x66\x56\161\137\137\167\x42\x66\125\143\167\142\61\x39\65\106\125\160\117\151\x4d\x69\x5f\164\x77\123\x6b\157\x37\x70\164\130\71\114\65\x31\x38\162\x41\66\62\61\105\x78\163\132\x6c\x63\x4d\172\111\71\x74\116\61\157\x30\x4c\105\122\x61\115\161\x67\117\163\x47\x61\x59\112\103\143\71\67\x76\x41\62\x4d\x75\154\131\x78\x69\x59\142\x6d\x45\112\123\x56\x4f\x4c\x35\146\x6d\142\161\x66\x34\x6e\130\71\x53\x63\x47\x6b\143\102\172\x61\x6b\x65\161\x64\x6a\x55\104\146\106\x4d\x76\x76\61\157\122\x4b\170\111\x74\x6e\120\171\162\x4c\102\164\164\x62\x33\120\x53\x5f\x58\61\x58\x73\x38\153\61\x4b\146\71\x4d\154\x34\x4e\160\141\x51\x53\x45\124\141\x6d\x35\62\x4a\x32\137\x36\120\132\x4a\60\162\142\x64\x50\165\61\121\x66\x71\103\114\x34\x57\132\x57\x4a\111\x43\146\172\x67\115\x7a\x52\170\x78\x2d\144\x4d\x6f\x64\150\x68\161\157\114\x58\x65\110\111\160\x50\155\x50\x65\x47\113\x5a\x33\x33\143\152\x49\160\66\x30\157\107\161\x44\163\144\117\121\73\x20\x75\75\x35\65\x31\x36\65\x31\x36\x37\63\x35\x30\x34\x32\61\65\x3b\x20\144\145\x76\151\x63\x65\x5f\x69\144\x3d\x31\x36\144\71\70\x38\x63\145\60\x65\x37\x62\141\145\146\66\x30\143\143\146\146\x65\x65\x30\x35\144\64\144\66\x38\70\146\x3b\40\x48\155\137\x6c\x76\164\x5f\61\144\142\x38\70\66\x34\x32\x65\63\x34\66\x33\70\71\x38\67\64\x32\x35\61\x62\65\x61\x31\x65\x64\145\144\x36\x65\63\75\x31\66\65\61\x36\67\63\x35\x31\64\73\40\x48\155\137\x6c\160\166\164\x5f\61\x64\x62\x38\x38\x36\x34\62\x65\x33\x34\x36\63\x38\71\70\x37\64\x32\x35\x31\142\65\x61\x31\x65\144\145\144\x36\145\x33\75\x31\x36\x35\61\x36\67\63\65\x33\67", "\125\163\145\x72\55\101\147\145\156\164" => "\x4d\x6f\x7a\151\x6c\x6c\141\57\65\56\x30\x20\50\127\151\x6e\144\x6f\x77\163\40\x4e\124\40\61\x30\x2e\60\73\40\127\151\x6e\66\64\x3b\40\170\66\x34\51\40\101\x70\x70\154\x65\127\145\142\x4b\151\164\57\65\63\67\x2e\63\66\x20\50\113\x48\x54\115\114\54\x20\154\151\x6b\145\x20\x47\x65\x63\153\x6f\x29\x20\103\150\162\x6f\155\145\57\x38\x30\56\60\x2e\x33\71\x38\67\x2e\61\66\x33\x20\x53\x61\146\x61\162\x69\x2f\x35\x33\67\56\63\66"]]); goto JbHm1; ugLeT: if ($data) { goto j0aNT; } goto itPYE; uQ6z5: j0aNT: goto SS88m; as8LZ: $data = $data["\x64\141\164\141"]["\x63\157\155\160\x61\x6e\171"]; goto gUIr9; YclE_: Log::notice("\x63\162\141\167\x6c\40{$code}\x20\162\x65\163\160\157\156\163\x65\x3a\40{$data}"); goto LCQl4; JbHm1: $data = $response->getBody()->getContents(); goto YclE_; gUIr9: } catch (\Exception $e) { Log::error("\143\162\x61\x77\154\x20\145\170\x63\x65\160\164\151\x6f\x6e\x3a\40" . $e->getMessage()); $data = []; } goto Wnew_; Wnew_: return $data; goto WNERR; dOZf6: Log::notice("\143\162\x61\167\154\40{$code}"); goto JrBwd; WNERR: } public function add($id = 0, $code = '') { goto m0LPn; Px_pX: K9Oib: goto wPnDW; Y5p97: $data["\143\157\156\164\x72\x6f\x6c\154\145\162"] = $data["\x61\x63\x74\165\x61\x6c\x5f\143\157\x6e\x74\x72\157\x6c\154\x65\x72"]; goto C_wIo; xkJW7: $data["\x77\x65\142\x73\x69\x74\x65"] = $data["\157\162\147\137\167\x65\142\x73\151\x74\145"]; goto o7BMt; CAiiS: $data["\x72\x65\x67\137\141\x73\163\145\x74"] = round($data["\162\x65\147\x5f\x61\163\163\x65\164"] / 100000000, 2) . "\xe4\272\xbf"; goto xkJW7; J1V6y: $data = null; goto Brxin; XCQdv: if ($id) { goto R5nSv; } goto GkFJO; wPnDW: return ajaxSuccess("\xe4\277\235\345\255\x98\346\210\x90\345\212\x9f"); goto DD3Z0; fVND0: $this->assign("\144\x61\164\141", $data); goto ZI54Z; qV2WC: goto K9Oib; goto Fg1fN; gmhjF: Upload::I()->relateAttaches($_POST["\160\x65\x6e\144\151\156\147\x5f\146\151\x6c\145\163"], $id); goto oX1Rb; IlIbO: $data = input("\x70\x6f\x73\x74\56\144\141\x74\141\x2f\141"); goto E1qE2; Hcgg4: $data["\x65\x73\x74\x61\x62\154\x69\x73\150\145\x64\137\x64\x61\x74\145"] = null; goto uavxQ; B6VQr: $this->assign("\151\x64", intval($id)); goto fVND0; o7BMt: $data["\x69\x6e\x74\x72\x6f\x64\165\143\164\x69\x6f\156"] = $data["\x6f\x72\147\x5f\143\x6e\x5f\x69\x6e\x74\x72\x6f\x64\165\143\x74\151\157\156"]; goto jYC2J; qDncI: $data["\x69\x64"] = 0; goto nbOcL; ZI54Z: $this->assign("\147\x72\x69\144", $_GET["\x67\x72\x69\144"]); goto aYz76; SG7ZE: if (!empty($data["\154\x69\x73\164\x65\x64\x5f\x64\x61\x74\x65"])) { goto M83Ti; } goto Bf54G; OT3E8: $data = []; goto ivKGG; lEPPm: if ($data) { goto vOUVt; } goto J1V6y; Brxin: vOUVt: goto B6VQr; C_wIo: $data["\x66\x6f\x72\155\x73"] = $data["\143\x6c\x61\x73\x73\151\137\x6e\x61\155\x65"]; goto CAiiS; BQvC3: $data["\143\x72\x65\141\164\x65\144\x5f\142\171"] = $this->loginUserId; goto DANgW; jYC2J: $data["\141\163\x73\151\147\156\145\162"] = ''; goto VTxCV; ivKGG: goto MPrLm; goto FjHrD; VTxCV: L7dSV: goto p_3HI; E1qE2: if (!empty($data["\x65\x73\x74\141\142\154\151\163\x68\x65\144\137\x64\x61\x74\145"])) { goto xxqg9; } goto Hcgg4; xZ5Ut: Db::table("\143\x6f\x6d\x70\x61\x6e\151\x65\163")->where(["\151\x64" => $id])->update($data); goto Px_pX; FoM2m: M83Ti: goto gEGNX; FjHrD: R5nSv: goto fHT29; Calgp: $data = $this->crawl($code); goto ztNuU; Gc8Rv: if (!$_POST["\160\145\x6e\x64\151\156\x67\137\146\x69\154\145\163"]) { goto IMdym; } goto gmhjF; olJCP: goto MPrLm; goto yte7t; EAorw: $data["\160\162\157\x76\x69\x6e\x63\145"] = $data["\x70\x72\x6f\166\x69\156\143\151\x61\x6c\137\156\141\155\145"]; goto Y5p97; nbOcL: $data["\156\141\155\x65"] = $data["\x6f\x72\x67\137\x73\x68\157\x72\x74\x5f\x6e\x61\x6d\x65\x5f\x63\156"]; goto EAorw; GkFJO: if ($code) { goto vmOhB; } goto OT3E8; aYz76: return $this->fetch(); goto c7y5V; fHT29: $data = Db::table("\143\x6f\155\x70\141\x6e\151\145\163")->where(["\x69\144" => $id])->find(); goto olJCP; yte7t: vmOhB: goto Calgp; oX1Rb: IMdym: goto qV2WC; p_3HI: MPrLm: goto lEPPm; ztNuU: if (!$data) { goto L7dSV; } goto qDncI; DANgW: $id = Db::table("\x63\157\x6d\x70\141\x6e\x69\145\x73")->insertGetId($data); goto Gc8Rv; m0LPn: if (!$this->request->isPost()) { goto EWxUK; } goto IlIbO; DD3Z0: EWxUK: goto XCQdv; gEGNX: if ($id) { goto Ih0dI; } goto BQvC3; uavxQ: xxqg9: goto SG7ZE; Fg1fN: Ih0dI: goto xZ5Ut; Bf54G: $data["\154\x69\x73\x74\x65\x64\137\144\141\164\145"] = null; goto FoM2m; c7y5V: } public function view($id) { goto I6v_E; ofqxL: return $this->fetch(); goto JiqrR; I6v_E: $data = Db::table("\143\x6f\155\160\141\x6e\151\145\163")->where(["\x69\x64" => $id])->find(); goto hLHhR; hLHhR: $this->assign("\144\141\164\x61", $data); goto ofqxL; JiqrR: } public function remove($id) { Db::table("\143\x6f\x6d\x70\x61\156\x69\x65\163")->where(["\151\x64" => $id])->delete(); return ajaxSuccess("\346\x93\215\xe4\275\234\xe6\x88\x90\xe5\x8a\x9f"); } }
