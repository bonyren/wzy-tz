<?php
 namespace app\index\controller; use app\index\logic\Admins; use app\index\logic\Note; use app\index\model\Notes as NoteModel; class Notes extends Common { public function index($category, $search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS) { goto w0Gfr; JcI_M: jWwx0: goto IEHD4; VqElI: if (!$data["\x74\157\164\x61\x6c"]) { goto oUkCT; } goto JsR3N; JsR3N: $data["\165\163\145\162\x73"] = Admins::I()->getAllUsers(); goto lX727; EiWhA: $data = Note::I()->search($search, $page, $rows); goto VqElI; lX727: oUkCT: goto lt8Vy; IEHD4: $search["\x63\x61\164\145\x67\157\162\x79"] = $category; goto EiWhA; SdWEZ: $this->assign("\165\x72\x6c\x73", ["\x65\144\x69\164" => url("\x69\156\x64\145\x78\57\x6e\157\x74\x65\163\57\145\144\151\164", ["\143\x61\164\x65\x67\157\x72\x79" => $category]), "\144\x65\x6c\145\x74\145" => url("\151\x6e\x64\x65\x78\x2f\156\157\164\x65\163\57\x64\145\154\145\x74\145")]); goto AHftV; AHftV: return $this->fetch(); goto JcI_M; w0Gfr: if (!$this->request->isGet()) { goto jWwx0; } goto SdWEZ; lt8Vy: return json($data); goto IY3h2; IY3h2: } public function edit($id = 0, $category = 0) { goto FUsNo; xXrb9: Cttzv: goto fGM1s; F4dxS: $data = input("\160\157\163\164\x2e\x64\141\164\141\x2f\141"); goto McBl6; cZS0G: $this->assign("\x72\157\167", $id ? NoteModel::get($id) : []); goto xUqYM; McBl6: $model = new NoteModel(); goto wMNWo; yvO7z: hSyZb: goto FMMy_; v3Ya5: wVQ7w: goto F4dxS; uGaXN: goto hSyZb; goto xXrb9; X8Ybl: $data["\x63\162\x65\x61\164\x65\x64\137\142\171"] = $this->loginUserId; goto any81; FUsNo: if (!$this->request->isGet()) { goto wVQ7w; } goto cZS0G; xUqYM: return $this->fetch(); goto v3Ya5; OUOCO: $data["\143\x61\164\145\147\157\162\171"] = $category; goto X8Ybl; wMNWo: if ($id) { goto Cttzv; } goto OUOCO; FMMy_: return ajaxSuccess("\344\xbf\x9d\xe5\xad\230\346\x88\220\xe5\x8a\x9f"); goto GwEYY; fGM1s: $model->allowField(true)->save($data, ["\151\144" => $id]); goto yvO7z; any81: $model->allowField(true)->save($data); goto uGaXN; GwEYY: } public function delete($id) { try { NoteModel::destroy($id); } catch (\Exception $e) { return ajaxError($e->getMessage()); } return ajaxSuccess("\xe5\210\240\351\x99\244\xe6\x88\220\xe5\212\237"); } }
