<?php
 namespace app\index\controller; use app\index\logic\Industry; class Knowledges extends Common { public function index($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS) { goto NXEFr; nKgDe: return $this->fetch(); goto NEIO2; NXEFr: if (!$this->request->isGet()) { goto b19yM; } goto ssSfv; ssSfv: $urls = ["\154\151\x73\164" => url("\x69\156\x64\x65\170\57\113\x6e\x6f\167\154\x65\144\147\x65\x73\x2f\151\156\144\145\170"), "\141\x74\x74\141\x63\150\x65\163" => url("\x69\x6e\144\145\x78\57\x55\x70\x6c\157\x61\x64\57\166\x69\x65\167\101\164\164\141\143\150\145\163", ["\141\x74\164\x61\x63\150\x6d\x65\156\164\x54\171\160\145" => \app\index\logic\Upload::ATTACH_KNOWLEDGE, "\x75\x69\x53\x74\x79\x6c\145" => Upload::ATTACHES_UI_TABLE_STYLE]), "\x65\144\x69\164" => url("\151\156\144\x65\x78\x2f\113\156\157\167\x6c\145\144\x67\145\x73\57\145\x64\x69\164"), "\x64\145\x6c\145\164\x65" => url("\151\156\144\x65\170\57\x4b\156\157\167\x6c\145\x64\147\x65\x73\57\144\145\x6c\145\x74\x65")]; goto KbbuU; Kpn_q: return json($data); goto st1rA; NEIO2: b19yM: goto sdStu; KbbuU: $this->assign("\165\x72\154\x73", $urls); goto nKgDe; sdStu: $data = \app\index\logic\Knowledges::I()->load($search, $page, $rows); goto Kpn_q; st1rA: } public function edit($id = 0) { goto JX6Gh; lwUI3: return ajaxSuccess("\xe4\xbf\235\345\255\230\xe6\210\x90\345\x8a\x9f"); goto q82Xs; mB505: $this->assign("\162\x6f\167", $row); goto pYUfQ; UZjE5: $data = input("\160\x6f\163\164\56"); goto PMm3m; JX6Gh: if (!$this->request->isGet()) { goto nctfX; } goto cj9Xl; pYUfQ: return $this->fetch(); goto LDTDH; LDTDH: nctfX: goto UZjE5; H4X4C: BT35f: goto mB505; cj9Xl: $row = \app\index\logic\Knowledges::I()->getRow($id); goto L0a3q; L0a3q: if ($row) { goto BT35f; } goto IRKW9; IRKW9: $row = \app\index\logic\Knowledges::I()->getDefaultRow(); goto H4X4C; Bc9Ma: try { \app\index\logic\Knowledges::I()->saveRow($id, $data); } catch (\Exception $e) { return ajaxError($e->getMessage()); } goto lwUI3; PMm3m: $data = $data["\144\141\x74\141"]; goto Bc9Ma; q82Xs: } public function delete($id) { try { \app\index\logic\Knowledges::I()->delete($id); } catch (\Exception $e) { return ajaxError($e->getMessage()); } return ajaxSuccess("\345\x88\xa0\351\231\xa4\346\210\x90\xe5\212\x9f"); } }
