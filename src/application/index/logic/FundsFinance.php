<?php
 namespace app\index\logic; use app\index\model\FundsFinanceContributes; use app\index\model\FundsFinanceIncomes; use app\index\model\FundsFinanceEnterprises; use app\index\model\FundsFinanceFees; use app\index\model\FundsFinanceTaxes; use app\index\model\FundsFinancePaid; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\index\logic\Defs; class FundsFinance extends Base { const FUND_FINANCE_PAID_ITEM_INCOME_TYPE = 1; const FUND_FINANCE_PAID_ITEM_TAX_TYPE = 2; const FUND_FINANCE_PAID_ITEM_FEE_TYPE = 3; const FUND_FINANCE_PAID_ITEM_ENTERPRISE_TYPE = 4; const FUND_FINANCE_PAID_ITEM_CONTRIBUTE_TYPE = 5; protected static $fundFinanceTableDefs = array(self::FUND_FINANCE_PAID_ITEM_INCOME_TYPE => "\146\165\x6e\144\x73\x5f\146\x69\156\x61\156\143\145\137\x69\x6e\x63\157\x6d\x65\163", self::FUND_FINANCE_PAID_ITEM_TAX_TYPE => "\146\x75\x6e\x64\163\137\146\151\156\x61\156\143\145\x5f\x74\141\170\145\x73", self::FUND_FINANCE_PAID_ITEM_FEE_TYPE => "\x66\x75\x6e\144\163\x5f\146\x69\156\x61\156\143\x65\137\x66\145\x65\163", self::FUND_FINANCE_PAID_ITEM_ENTERPRISE_TYPE => "\146\x75\156\x64\163\137\146\151\x6e\x61\156\143\x65\137\145\156\164\x65\162\x70\x72\x69\x73\145\x73", self::FUND_FINANCE_PAID_ITEM_CONTRIBUTE_TYPE => "\x66\x75\x6e\144\163\x5f\x66\151\156\x61\x6e\143\145\137\x63\157\156\164\x72\x69\x62\165\164\x65\x73"); protected static $fundFinanceIdFieldDefs = array(self::FUND_FINANCE_PAID_ITEM_INCOME_TYPE => "\x66\x66\x69\137\x69\x64", self::FUND_FINANCE_PAID_ITEM_TAX_TYPE => "\x66\146\164\x5f\x69\144", self::FUND_FINANCE_PAID_ITEM_FEE_TYPE => "\x66\x66\146\x5f\151\144", self::FUND_FINANCE_PAID_ITEM_ENTERPRISE_TYPE => "\146\x66\145\137\x69\144", self::FUND_FINANCE_PAID_ITEM_CONTRIBUTE_TYPE => "\146\x66\143\137\x69\x64"); public static $fundFinancePaidItemTypeDefs = array(self::FUND_FINANCE_PAID_ITEM_INCOME_TYPE => "\xe6\x94\xb6\xe5\x85\xa5", self::FUND_FINANCE_PAID_ITEM_TAX_TYPE => "\347\xbc\264\xe7\xa8\216", self::FUND_FINANCE_PAID_ITEM_FEE_TYPE => "\xe8\264\271\xe7\x94\xa8", self::FUND_FINANCE_PAID_ITEM_ENTERPRISE_TYPE => "\346\x8a\225\xe8\265\x84", self::FUND_FINANCE_PAID_ITEM_CONTRIBUTE_TYPE => "\xe5\x90\x88\xe4\xbc\x99\344\272\xba\xe5\x87\272\xe8\xb5\x84"); protected function __construct() { parent::__construct(); } protected function getPaidStatus($amount, $actualAmount) { goto I27rb; GA3cY: return Defs::FUND_FINANCE_PAID_WORKING_STATUS; goto Yp_zB; egiNN: if (!($actualAmount < $amount)) { goto fykTG; } goto GA3cY; ZP0Tx: return Defs::FUND_FINANCE_PAID_PENDING_STATUS; goto ANpLP; Yp_zB: fykTG: goto nhTq3; ANpLP: bHB6K: goto t4yM2; t4yM2: if (!($amount == $actualAmount)) { goto IQXQh; } goto qhi4r; GKNxv: IQXQh: goto egiNN; nhTq3: return Defs::FUND_FINANCE_PAID_EXCEPTION_STATUS; goto TqNZ2; qhi4r: return Defs::FUND_FINANCE_PAID_OVER_STATUS; goto GKNxv; I27rb: if ((float) $actualAmount) { goto bHB6K; } goto ZP0Tx; TqNZ2: } public function getFinanceInfos($fundId) { goto Nf15c; Nf15c: $leftAmount = 0.0; goto qE1xZ; fWRUd: mdwXi: goto JSSo2; qE1xZ: $contributes = ["\164\157\x74\x61\x6c" => 0.0, "\x70\141\x69\x64" => 0.0, "\154\x65\146\164" => 0.0]; goto iUdH9; hCftC: l2Brf: goto p21_M; MR70H: $fees = Db::table("\146\x75\156\x64\163\x5f\x66\151\156\141\x6e\x63\x65\137\146\x65\x65\163")->where("\x66\x75\x6e\144\137\x69\144", $fundId)->group("\164\x79\x70\145")->field(["\164\x79\x70\145", "\163\165\x6d\50\141\155\x6f\x75\x6e\x74\51" => "\164\157\x74\141\x6c"])->select(); goto bPy_u; WZGHp: foreach ($incomes as &$income) { $type = $income["\x74\x79\x70\x65"]; O1gCz: } goto hCftC; iUdH9: $contributes["\x74\x6f\164\141\x6c"] = Db::table("\x66\x75\x6e\x64\x73\137\146\151\156\141\156\x63\x65\x5f\x63\157\156\164\162\x69\142\165\x74\x65\x73")->where("\x66\x75\x6e\144\137\151\144", $fundId)->sum("\x61\x6d\157\x75\156\x74"); goto hUlK_; bPy_u: foreach ($fees as &$fee) { $type = $fee["\x74\x79\160\145"]; Tp9A9: } goto fWRUd; JSSo2: $leftAmount = $contributes["\164\157\x74\x61\154"] + array_sum(array_column($incomes, "\164\x6f\164\141\x6c")) - $invests["\x74\x6f\164\x61\x6c"] - array_sum(array_column($taxes, "\164\157\164\x61\x6c")) - array_sum(array_column($fees, "\x74\157\x74\x61\154")); goto rGJgq; AiijP: $incomes = Db::table("\146\165\x6e\144\163\x5f\x66\151\156\x61\156\143\145\x5f\151\x6e\x63\157\x6d\x65\x73")->where("\146\x75\x6e\144\x5f\151\144", $fundId)->group("\x74\x79\160\145")->field(["\164\171\x70\145", "\163\x75\x6d\x28\141\155\157\165\x6e\164\51" => "\x74\x6f\x74\x61\x6c"])->select(); goto WZGHp; xujys: foreach ($taxes as &$tax) { $type = $tax["\164\171\x70\x65"]; r57LD: } goto T1MPn; JIRNl: $invests["\x74\157\x74\141\154"] = Db::table("\x66\x75\x6e\144\163\x5f\x66\x69\156\x61\x6e\143\x65\x5f\x65\x6e\x74\x65\162\x70\x72\151\163\x65\163")->where("\x66\165\x6e\x64\137\x69\x64", $fundId)->sum("\x61\x6d\x6f\165\x6e\164"); goto AiijP; p21_M: $taxes = Db::table("\146\165\x6e\x64\163\x5f\146\x69\x6e\x61\x6e\143\145\x5f\164\141\x78\145\163")->where("\146\165\156\x64\137\151\144", $fundId)->group("\x74\171\160\x65")->field(["\164\x79\160\x65", "\x73\165\x6d\50\x61\155\157\x75\x6e\164\x29" => "\x74\157\164\141\154"])->select(); goto xujys; hUlK_: $invests = ["\x74\157\x74\141\154" => 0.0, "\x70\141\151\144" => 0.0, "\x6c\x65\x66\x74" => 0.0]; goto JIRNl; T1MPn: bsOTC: goto MR70H; rGJgq: return ["\x6c\145\x66\x74\x5f\141\155\157\165\156\164" => $leftAmount, "\x63\x6f\x6e\x74\x72\151\142\x75\164\145\x73" => $contributes, "\151\x6e\x63\157\155\x65\163" => $incomes, "\164\141\x78\145\163" => $taxes, "\x69\156\166\145\x73\164\163" => $invests, "\x66\145\145\x73" => $fees]; goto HSO76; HSO76: } public function loadFinanceContributes($fundId) { goto lIJUY; sWLjo: $totalActualAmount = 0.0; goto FU06Z; QauMN: return ["\164\x6f\164\x61\x6c" => count($records), "\x72\157\167\163" => $records, "\x66\157\157\164\145\162" => [["\x66\146\143\x5f\x69\x64" => 0, "\x64\x61\x74\x65" => "\346\x80\273\xe8\xae\241", "\x61\155\157\165\156\x74" => $totalAmount, "\x61\x63\164\x75\x61\x6c\x5f\x61\155\157\165\x6e\164" => $totalActualAmount]]]; goto LrtuM; del3m: $totalAmount = 0.0; goto sWLjo; lIJUY: $records = Db::table("\146\165\x6e\144\x73\x5f\146\x69\x6e\x61\156\143\x65\x5f\143\157\x6e\164\162\151\142\165\164\145\163")->where("\x66\165\x6e\x64\137\151\144", $fundId)->order("\x66\146\x63\137\x69\x64\40\144\x65\163\x63")->field(true)->select(); goto del3m; FU06Z: foreach ($records as &$record) { goto mIkkV; SpUlw: $totalAmount += $record["\141\155\x6f\x75\156\x74"]; goto soWeL; soWeL: $totalActualAmount += $record["\x61\x63\x74\165\x61\x6c\137\x61\155\157\165\x6e\164"]; goto oNQKZ; UIbqb: WvjlW: goto uWvjz; oNQKZ: $record["\x73\164\141\164\165\163"] = $this->getPaidStatus($record["\x61\x6d\157\165\x6e\x74"], $actualAmount); goto UIbqb; mIkkV: $actualAmount = $this->getTotalPaidAmount(self::FUND_FINANCE_PAID_ITEM_CONTRIBUTE_TYPE, $record["\146\x66\x63\137\x69\144"]); goto p4Nd9; p4Nd9: $record["\x61\143\164\165\141\154\x5f\141\x6d\x6f\x75\156\x74"] = sprintf("\45\x2e\x32\x66", $actualAmount); goto SpUlw; uWvjz: } goto foZxb; foZxb: DQmjM: goto QauMN; LrtuM: } public function getFinanceContributeInfos($ffcId) { goto A3NcY; bT0xF: return false; goto wP42T; S2Pws: return $infos; goto Y6FR9; uY6GY: $taxes = Db::table("\146\165\156\144\x73\x5f\x66\151\x6e\141\x6e\x63\x65\x5f\x74\x61\x78\145\x73")->where("\146\146\x63\137\x69\x64", $ffcId)->column("\141\155\157\x75\156\164", "\x74\171\x70\x65"); goto iZgfj; v2tX7: $infos["\x74\141\x78"] = $taxes; goto S2Pws; wP42T: YqGeY: goto uY6GY; pMw2b: if ($infos) { goto YqGeY; } goto bT0xF; VqdnP: $taxes = []; goto VDssx; iZgfj: if ($taxes) { goto NQ32m; } goto VqdnP; A3NcY: $infos = Db::table("\146\165\156\x64\163\x5f\146\x69\x6e\x61\156\x63\145\137\x63\x6f\156\x74\162\x69\142\x75\164\x65\x73")->where("\146\146\143\137\151\144", $ffcId)->field(true)->find(); goto pMw2b; VDssx: NQ32m: goto v2tX7; Y6FR9: } public function addFinanceContribute($fundId, $infos) { goto QFQ8L; fe11i: return $ffcId; goto S8ERL; V0R6K: $model = model("\x46\165\x6e\144\163\106\x69\156\x61\156\x63\145\x43\157\156\164\162\x69\142\165\x74\145\163"); goto zUFFV; IaDtF: return $ffcId; goto J5362; zUFFV: $model->data($datas); goto JpTZL; x18uC: if (!emptyInArray($infos, "\164\x61\170\137\x74\171\160\x65")) { goto SPaHg; } goto vg3ZS; a4qvJ: if (is_array($infos["\164\x61\x78\x5f\164\171\x70\145"])) { goto b3fHg; } goto fe11i; JpTZL: $model->save(); goto NTm_W; Rs6iA: foreach ($infos["\164\x61\170\x5f\x74\171\x70\x65"] as $taxType => $taxValue) { goto Zw6gU; XzYKq: EYK6N: goto bXSQD; jaTpZ: $taxDatas = ["\x66\165\x6e\144\x5f\x69\144" => $fundId, "\164\x69\164\x6c\145" => $datas["\x74\x69\x74\154\x65"] . "\x2d" . Defs::$fundTaxTypeDefs[$taxType], "\x61\x6d\157\x75\156\x74" => $infos["\x74\141\170"][$taxType], "\164\x79\x70\145" => $taxType, "\144\141\x74\145" => $datas["\x64\x61\x74\145"], "\146\146\143\x5f\151\144" => $ffcId]; goto l83L9; l83L9: $taxModel->data($taxDatas); goto vKafD; vKafD: $taxModel->save(); goto XzYKq; Zw6gU: $taxModel = model("\106\165\x6e\x64\163\x46\151\x6e\141\x6e\143\145\x54\141\170\x65\x73"); goto jaTpZ; bXSQD: } goto l2MFC; cCmV7: SPaHg: goto a4qvJ; om99y: $datas["\x74\151\164\x6c\x65"] = !emptyInArray($infos, "\164\151\164\x6c\x65") ? $infos["\x74\151\x74\154\x65"] : ''; goto i4rks; ocIpS: $datas["\x66\165\156\x64\x5f\x69\144"] = $fundId; goto om99y; l2MFC: y_onN: goto IaDtF; NTm_W: $ffcId = $model->ffc_id; goto x18uC; i4rks: $datas["\141\155\157\x75\156\x74"] = !emptyInArray($infos, "\141\x6d\157\165\x6e\164") ? $infos["\141\x6d\157\165\x6e\x74"] : 0; goto wqJKR; QFQ8L: $datas = []; goto ocIpS; S8ERL: b3fHg: goto Rs6iA; wqJKR: $datas["\144\x61\164\145"] = !emptyInArray($infos, "\144\141\x74\x65") ? $infos["\x64\x61\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto V0R6K; vg3ZS: return $ffcId; goto cCmV7; J5362: } public function editFinanceContribute($ffcId, $infos) { goto Vx00X; djm6h: HcAX3: goto PGebl; SygKH: if (is_array($infos["\164\x61\x78\137\164\171\x70\145"])) { goto Dzagm; } goto IZTcu; p1RqV: $datas["\x64\x61\x74\x65"] = !emptyInArray($infos, "\x64\141\x74\145") ? $infos["\144\141\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto NZiZj; NZiZj: $model->data($datas); goto JP2dB; UGN6a: a11nn: goto MqMhh; c3FCx: return false; goto hpX4k; IUcJs: $datas["\164\x69\164\154\145"] = !emptyInArray($infos, "\164\151\164\154\x65") ? $infos["\164\151\164\154\145"] : ''; goto xE90H; JP2dB: $model->save(); goto mdbOD; hpX4k: WxP90: goto Aulvj; PGebl: $existTaxTypes = Db::table("\146\x75\x6e\144\163\x5f\x66\x69\156\141\156\x63\145\x5f\164\x61\x78\145\x73")->where("\146\x66\x63\x5f\x69\144", $ffcId)->column("\x74\x79\x70\x65"); goto rLh_o; Aulvj: $datas = []; goto IUcJs; xE90H: $datas["\x61\155\157\x75\x6e\x74"] = !emptyInArray($infos, "\x61\x6d\x6f\165\156\164") ? $infos["\x61\x6d\157\165\156\x74"] : 0; goto p1RqV; jxCKD: if ($model) { goto WxP90; } goto c3FCx; MqMhh: return true; goto iUZ2I; y6RXt: nWFKH: goto SygKH; IZTcu: return false; goto Yv3T2; rLh_o: foreach ($existTaxTypes as $existTaxType) { goto H_tCH; RZUn8: if (!$taxModel) { goto CcYvR; } goto E8qRX; TYOsK: CcYvR: goto FEi51; FEi51: BBTAE: goto FRlsF; E8qRX: $taxModel->delete(); goto TYOsK; ilyw9: $taxModel = FundsFinanceTaxes::get(["\146\146\x63\137\151\x64" => $ffcId, "\164\171\x70\x65" => $existTaxType]); goto RZUn8; H_tCH: if (array_key_exists($existTaxType, $infos["\x74\x61\x78\x5f\x74\171\160\x65"])) { goto BBTAE; } goto ilyw9; FRlsF: qLgco: goto Na0dw; Na0dw: } goto UGN6a; Yv3T2: Dzagm: goto CwUR5; AsJIJ: if ($fundId) { goto emMJ1; } goto z8t7w; mdbOD: if (!emptyInArray($infos, "\x74\x61\170\x5f\x74\x79\160\x65")) { goto nWFKH; } goto neGhj; CwUR5: $fundId = Db::table("\x66\x75\156\x64\163\137\x66\x69\156\x61\x6e\143\x65\x5f\x63\157\x6e\x74\162\x69\x62\x75\x74\x65\x73")->where("\146\146\143\x5f\x69\144", $ffcId)->value("\x66\165\156\144\x5f\x69\144"); goto AsJIJ; mR4ZH: foreach ($infos["\x74\x61\170\x5f\x74\x79\x70\145"] as $taxType => $taxValue) { goto yYfGP; MF5PL: $taxModel = FundsFinanceTaxes::get(["\146\146\x63\137\x69\x64" => $ffcId, "\x74\171\x70\145" => $taxType]); goto Qhzf3; yYfGP: $taxDatas = ["\146\165\x6e\x64\137\x69\144" => $fundId, "\x74\151\x74\154\x65" => $datas["\164\151\164\x6c\x65"] . "\x2d" . Defs::$fundTaxTypeDefs[$taxType], "\x61\x6d\x6f\x75\156\164" => $infos["\164\141\170"][$taxType], "\164\x79\160\x65" => $taxType, "\x64\x61\x74\x65" => $datas["\x64\x61\x74\x65"], "\146\146\x63\x5f\x69\144" => $ffcId]; goto MF5PL; Wkewo: hzqYg: goto LoCh9; DADyp: $taxModel->save(); goto w7lYT; FLgun: $taxModel->save(); goto Wkewo; Kgj6n: $taxModel = model("\106\x75\156\x64\163\x46\x69\156\141\156\x63\145\x54\x61\x78\x65\x73"); goto b6omr; w7lYT: goto hzqYg; goto p0aGg; Qhzf3: if ($taxModel) { goto NP7xB; } goto Kgj6n; b6omr: $taxModel->data($taxDatas); goto DADyp; p0aGg: NP7xB: goto jlClw; LoCh9: cARQi: goto fxomt; jlClw: $taxModel->data($taxDatas); goto FLgun; fxomt: } goto djm6h; neGhj: $infos["\164\141\170\137\164\x79\160\x65"] = []; goto y6RXt; fuGNJ: emMJ1: goto mR4ZH; z8t7w: return false; goto fuGNJ; Vx00X: $model = FundsFinanceContributes::get($ffcId); goto jxCKD; iUZ2I: } public function deleteFinanceContribute($ffcId) { goto lUuZp; c0VIO: $this->deleteFinancePaidByItem($ffcId); goto JTbfi; JTbfi: return true; goto a3Iri; sMBy2: gElaX: goto c0VIO; lUuZp: $model = FundsFinanceContributes::get($ffcId); goto t1c_F; W0dQt: D9BnL: goto oRUZS; xxSyM: foreach ($taxes as $tax) { $tax->delete(); LuPhF: } goto sMBy2; oRUZS: $taxes = FundsFinanceTaxes::all(["\146\146\143\x5f\151\144" => $ffcId]); goto xxSyM; t1c_F: if (!$model) { goto D9BnL; } goto F3mmO; F3mmO: $model->delete(); goto W0dQt; a3Iri: } public function loadFinanceFees($fundId) { goto LlaEN; PQmF5: return ["\164\x6f\x74\141\154" => count($records), "\x72\x6f\x77\x73" => $records, "\146\x6f\157\164\145\162" => [["\146\146\146\x5f\x69\144" => 0, "\142\145\x6c\x6f\x6e\147\137\151\156\x74\x65\x72\x76\x61\154" => "\346\200\273\xe8\256\241", "\141\x6d\x6f\x75\156\x74" => $totalAmount, "\141\x63\x74\x75\141\154\x5f\x61\155\x6f\x75\x6e\x74" => $totalActualAmount]]]; goto y2Yiu; MHPAH: $totalActualAmount = 0.0; goto qV3La; LlaEN: $records = Db::table("\146\165\156\x64\x73\137\x66\151\156\x61\x6e\143\145\137\146\x65\x65\x73")->where("\x66\165\x6e\144\137\151\144", $fundId)->order("\x66\x66\x66\137\x69\144\x20\144\145\x73\143")->field(true)->select(); goto kKZc7; AQnTI: jddNy: goto PQmF5; kKZc7: $totalAmount = 0.0; goto MHPAH; qV3La: foreach ($records as &$record) { goto dZXvE; QLMUr: $totalAmount += $record["\141\x6d\x6f\165\156\164"]; goto cAK2d; dZXvE: $actualAmount = $this->getTotalPaidAmount(self::FUND_FINANCE_PAID_ITEM_FEE_TYPE, $record["\x66\146\146\x5f\x69\x64"]); goto qYxfX; cAK2d: $totalActualAmount += $record["\141\x63\x74\165\141\154\137\x61\155\157\x75\156\164"]; goto GSWjl; GSWjl: $record["\163\164\x61\164\165\163"] = $this->getPaidStatus($record["\x61\x6d\157\165\x6e\x74"], $actualAmount); goto pnfZa; pnfZa: IAF31: goto C2f9G; qYxfX: $record["\x61\143\164\165\141\154\137\141\155\157\165\156\164"] = sprintf("\x25\x2e\62\146", $actualAmount); goto QLMUr; C2f9G: } goto AQnTI; y2Yiu: } public function getFinanceFeeInfos($fffId) { goto wivyG; COmHD: A0zVa: goto NoI2o; wivyG: $infos = Db::table("\146\165\x6e\144\x73\x5f\x66\x69\x6e\141\156\143\145\137\x66\145\x65\163")->where("\146\x66\x66\137\151\x64", $fffId)->field(true)->find(); goto HRCIx; NoI2o: return $infos; goto oE7i8; HEVK1: return false; goto COmHD; HRCIx: if ($infos) { goto A0zVa; } goto HEVK1; oE7i8: } public function addFinanceFee($fundId, $infos) { goto reY8f; uj2cL: $datas["\x74\151\x74\154\145"] = !emptyInArray($infos, "\164\x69\164\x6c\145") ? $infos["\x74\x69\164\154\145"] : ''; goto k1TAT; dvTeY: $fffId = $model->fff_id; goto ridD3; reY8f: $datas = []; goto QguhZ; gTpAz: $datas["\145\x6e\x64\x5f\144\141\x74\145"] = !emptyInArray($infos, "\x65\x6e\144\137\x64\x61\164\x65") ? $infos["\145\x6e\x64\x5f\x64\x61\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto VZjr3; VZjr3: $model = model("\106\165\x6e\144\x73\x46\x69\x6e\x61\156\143\145\x46\145\145\163"); goto HNvez; ridD3: return true; goto Ot8Fn; W6jDE: $datas["\146\x72\x6f\x6d\x5f\144\141\164\x65"] = !emptyInArray($infos, "\x66\x72\x6f\x6d\x5f\x64\x61\x74\145") ? $infos["\x66\x72\x6f\x6d\x5f\x64\141\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto gTpAz; QguhZ: $datas["\146\165\156\x64\137\151\x64"] = $fundId; goto kidW5; HNvez: $model->data($datas); goto VmPIg; VmPIg: $model->save(); goto dvTeY; k1TAT: $datas["\x61\x6d\157\165\156\x74"] = !emptyInArray($infos, "\x61\x6d\157\165\x6e\x74") ? $infos["\141\155\x6f\165\156\x74"] : 0; goto W6jDE; kidW5: $datas["\164\x79\x70\145"] = !emptyInArray($infos, "\x74\171\160\145") ? $infos["\x74\x79\x70\x65"] : Defs::FUND_FEE_OTHER_TYPE; goto uj2cL; Ot8Fn: } public function editFinanceFee($fffId, $infos) { goto NN5vI; PCGnm: $model = FundsFinanceFees::get($fffId); goto iDyNO; cQx4Z: return true; goto W7iEV; JXewR: $datas["\164\151\x74\154\145"] = !emptyInArray($infos, "\x74\151\164\154\x65") ? $infos["\164\151\x74\154\x65"] : ''; goto YlI1m; NN5vI: $datas = []; goto Y61GD; k2dMI: $model->save(); goto cQx4Z; Mevve: $model->data($datas); goto k2dMI; WmfHT: $datas["\146\x72\x6f\x6d\137\x64\x61\164\x65"] = !emptyInArray($infos, "\x66\162\157\155\x5f\144\141\x74\x65") ? $infos["\x66\x72\157\155\x5f\144\x61\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto wh6n2; Y61GD: $datas["\x74\171\x70\145"] = !emptyInArray($infos, "\x74\171\160\145") ? $infos["\x74\x79\x70\145"] : Defs::FUND_FEE_OTHER_TYPE; goto JXewR; iDyNO: if ($model) { goto l6vEQ; } goto CBeJP; XFk0u: l6vEQ: goto Mevve; YlI1m: $datas["\141\155\x6f\165\x6e\164"] = !emptyInArray($infos, "\x61\x6d\157\165\x6e\x74") ? $infos["\x61\x6d\x6f\x75\156\164"] : 0; goto WmfHT; wh6n2: $datas["\145\x6e\x64\x5f\x64\x61\164\x65"] = !emptyInArray($infos, "\x65\156\144\x5f\x64\x61\x74\145") ? $infos["\x65\156\144\x5f\144\x61\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto PCGnm; CBeJP: return false; goto XFk0u; W7iEV: } public function deleteFinanceFee($fffId) { goto YBPK3; Qc_hS: return false; goto LW4er; nwEXh: if ($model) { goto mi_Gg; } goto Qc_hS; rfg5k: $this->deleteFinancePaidByItem($fffId); goto n_Gzn; LW4er: mi_Gg: goto hePJR; hePJR: $model->delete(); goto rfg5k; n_Gzn: return true; goto xcc3D; YBPK3: $model = FundsFinanceFees::get($fffId); goto nwEXh; xcc3D: } public function loadFinanceIncomes($fundId) { goto lQ8UJ; opXhU: rpfA0: goto pXsfh; pXsfh: return ["\x74\157\x74\x61\154" => count($records), "\x72\x6f\x77\163" => $records, "\146\x6f\157\164\x65\162" => [["\x66\x66\x69\137\151\x64" => 0, "\144\x61\x74\x65" => "\xe6\200\273\xe8\256\241", "\x61\155\157\x75\x6e\x74" => $totalAmount, "\141\x63\x74\165\141\154\x5f\141\155\157\x75\x6e\x74" => $totalActualAmount]]]; goto p0A1V; MZknc: foreach ($records as &$record) { goto kJyxT; AT_OM: $totalAmount += $record["\x61\x6d\x6f\x75\x6e\164"]; goto d80Pv; d80Pv: $totalActualAmount += $record["\x61\143\x74\165\141\154\137\141\x6d\x6f\x75\x6e\164"]; goto TboqI; gaxUj: $record["\141\143\164\165\x61\154\137\141\x6d\157\165\x6e\x74"] = sprintf("\x25\56\x32\x66", $actualAmount); goto AT_OM; kJyxT: $actualAmount = $this->getTotalPaidAmount(self::FUND_FINANCE_PAID_ITEM_INCOME_TYPE, $record["\x66\x66\151\x5f\151\x64"]); goto gaxUj; TboqI: $record["\x73\164\x61\x74\165\x73"] = $this->getPaidStatus($record["\x61\x6d\157\165\x6e\164"], $actualAmount); goto BlJ03; BlJ03: PV__0: goto jjf5o; jjf5o: } goto opXhU; SZhDA: $totalAmount = 0.0; goto Hrssw; lQ8UJ: $records = Db::table("\x66\x75\156\x64\x73\x5f\x66\151\x6e\141\x6e\x63\x65\137\151\156\143\x6f\x6d\x65\x73")->where("\146\x75\156\144\137\151\144", $fundId)->order("\x66\x66\x69\x5f\x69\144\x20\x64\x65\163\x63")->field(true)->select(); goto SZhDA; Hrssw: $totalActualAmount = 0.0; goto MZknc; p0A1V: } public function getFinanceIncomeInfos($ffiId) { goto aLLC6; J2Weg: if ($infos) { goto rYj9j; } goto JlTHe; aLLC6: $infos = Db::table("\146\165\x6e\144\x73\137\x66\151\156\141\x6e\143\145\137\151\156\143\x6f\x6d\x65\x73")->where("\x66\146\151\137\x69\x64", $ffiId)->field(true)->find(); goto J2Weg; EuOhD: return $infos; goto a8S52; JlTHe: return false; goto SGlEg; SGlEg: rYj9j: goto Mwc2L; Mwc2L: $taxes = Db::table("\x66\165\x6e\144\x73\137\x66\x69\x6e\x61\156\x63\145\x5f\x74\x61\x78\x65\x73")->where("\x66\x66\151\137\151\144", $ffiId)->column("\x61\x6d\157\x75\156\164", "\164\x79\x70\145"); goto ck2kn; ck2kn: if ($taxes) { goto fnebe; } goto lHCH2; PZUpZ: fnebe: goto vUvrR; vUvrR: $infos["\164\141\170"] = $taxes; goto EuOhD; lHCH2: $taxes = []; goto PZUpZ; a8S52: } public function addFinanceIncome($fundId, $infos) { goto d0hxx; XUKaU: if (!(round($datas["\141\x6d\157\x75\156\x74"], 2) <= 0)) { goto aWoBF; } goto Sx9xF; SDlji: $datas["\x61\155\157\165\156\x74"] = $infos["\x61\x6d\157\165\156\164"] ?? 0; goto XUKaU; d0hxx: $datas = []; goto sF2Xl; nytGR: return $ffiId; goto jD0KD; SL2pT: return $ffiId; goto xshEJ; ArcRu: $datas["\164\171\160\x65"] = !emptyInArray($infos, "\x74\171\x70\x65") ? $infos["\x74\x79\x70\145"] : Defs::FUND_INCOME_OTHER_TYPE; goto H8v5m; rU_4u: foreach ($infos["\x74\141\x78\137\x74\171\160\x65"] as $taxType => $taxValue) { goto MXLm9; xisbs: VFTPU: goto u0DMA; IHaRe: rogqi: goto X8td1; u0DMA: Db::table("\146\x75\156\144\163\137\146\x69\156\141\156\x63\145\137\164\x61\170\x65\x73")->insert(["\146\x75\156\144\137\x69\x64" => $fundId, "\164\x69\x74\x6c\145" => $datas["\x74\x69\x74\x6c\145"] . "\55" . Defs::$fundTaxTypeDefs[$taxType], "\x61\155\x6f\165\x6e\164" => $amount, "\164\x79\160\145" => $taxType, "\x64\141\x74\x65" => $datas["\x64\x61\164\x65"], "\x66\146\151\137\x69\x64" => $ffiId]); goto IHaRe; MXLm9: $amount = round($infos["\164\x61\x78"][$taxType], 2); goto hj_27; hj_27: if (!($amount == 0.0)) { goto VFTPU; } goto W0rwP; W0rwP: goto rogqi; goto xisbs; X8td1: } goto PIWlC; HKl3I: o0bCZ: goto kheXu; kheXu: if (is_array($infos["\x74\x61\170\x5f\164\171\160\x65"])) { goto ZYbxF; } goto SL2pT; wpNBP: $datas["\144\141\164\x65"] = !emptyInArray($infos, "\x64\x61\x74\145") ? $infos["\x64\141\164\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto zKnPc; FnmZn: return $ffiId; goto HKl3I; ctc2v: if (!emptyInArray($infos, "\164\x61\x78\x5f\x74\x79\160\145")) { goto o0bCZ; } goto FnmZn; zKnPc: $model = model("\106\x75\156\144\x73\x46\151\x6e\141\156\143\x65\x49\156\143\157\x6d\145\163"); goto E3PAf; sF2Xl: $datas["\146\165\x6e\144\x5f\x69\x64"] = $fundId; goto ArcRu; H8v5m: $datas["\164\151\x74\x6c\x65"] = !emptyInArray($infos, "\164\151\x74\154\x65") ? $infos["\x74\x69\x74\154\145"] : ''; goto SDlji; Sx9xF: return false; goto BHttz; xshEJ: ZYbxF: goto rU_4u; BHttz: aWoBF: goto wpNBP; bDKSX: $model->save(); goto Q8GOK; Q8GOK: $ffiId = $model->ffi_id; goto ctc2v; E3PAf: $model->data($datas); goto bDKSX; PIWlC: yRJDs: goto nytGR; jD0KD: } public function editFinanceIncome($ffiId, $infos) { goto CACWB; bnHyA: $ffi->amount = $infos["\141\x6d\157\x75\x6e\164"] ?? $ffi->amount; goto flpS9; rNVHr: $fundId = Db::table("\x66\165\156\x64\163\x5f\146\151\156\x61\x6e\x63\145\x5f\x69\156\x63\157\x6d\145\x73")->where("\x66\146\x69\x5f\151\x64", $ffiId)->value("\146\165\x6e\x64\137\x69\x64"); goto vhlJd; uLdTn: return true; goto uqd1Y; IbEPx: mSSFQ: goto MQ1nA; BpW0d: $ffi->type = $infos["\164\171\160\x65"] ?? $ffi->type; goto UOmuv; vhlJd: if ($fundId) { goto XuDyW; } goto DpIvG; flpS9: $ffi->date = $infos["\x64\141\164\145"] ?? $ffi->date; goto rrGA8; DpIvG: return false; goto MJowT; GywHs: if ($ffi) { goto KyWe8; } goto Lmf66; r09PF: $existTaxTypes = Db::table("\x66\x75\x6e\144\163\x5f\146\151\x6e\x61\x6e\x63\x65\x5f\164\x61\x78\145\x73")->field("\x66\146\x74\137\151\144\x2c\164\x79\160\145")->where("\x66\146\151\137\151\144", $ffiId)->select(); goto QsxHi; Bb7q9: return false; goto cnwUL; QsxHi: foreach ($existTaxTypes as $v) { goto DVYpE; LIpIU: KqLw4: goto BgISh; DVYpE: if (isset($infos["\164\x61\170\x5f\x74\x79\x70\145"][$v["\x74\x79\160\145"]])) { goto DQKFm; } goto KimWk; KimWk: Db::table("\146\165\x6e\144\x73\x5f\146\x69\156\141\156\x63\145\x5f\164\141\x78\x65\163")->where("\x66\x66\164\x5f\151\144", $v["\x66\146\164\137\x69\144"])->delete(); goto rsIef; rsIef: DQKFm: goto LIpIU; BgISh: } goto e38mj; MQ1nA: if (is_array($infos["\164\x61\170\137\164\x79\160\145"])) { goto Rs03A; } goto Bb7q9; aHQOx: $infos["\x74\141\170\137\164\x79\x70\x65"] = []; goto IbEPx; Lmf66: return false; goto XrH14; e38mj: Nkb2U: goto uLdTn; rrGA8: $ffi->save(); goto PzkDo; CACWB: $ffi = FundsFinanceIncomes::get($ffiId); goto GywHs; PzkDo: if (!emptyInArray($infos, "\x74\x61\x78\137\x74\171\160\x65")) { goto mSSFQ; } goto aHQOx; MJowT: XuDyW: goto Yt0aX; cnwUL: Rs03A: goto rNVHr; UOmuv: $ffi->title = $infos["\164\x69\x74\154\x65"] ?? $ffi->title; goto bnHyA; YAE46: Nvoar: goto r09PF; Yt0aX: foreach ($infos["\164\141\x78\x5f\164\x79\x70\145"] as $taxType => $taxValue) { goto bJuwb; bJuwb: $amount = round($infos["\x74\141\170"][$taxType], 2); goto xIMPC; DTpZB: vqTrf: goto R303C; cIHNX: WjwJx: goto VSDTT; R303C: FsgHH: goto pb9Gb; UPJVe: $fft_id = Db::table("\x66\x75\156\x64\163\137\146\x69\x6e\141\156\x63\145\x5f\164\x61\170\x65\163")->where(["\146\x66\x69\137\x69\x64" => $ffiId, "\x74\x79\160\x65" => $taxType])->value("\146\x66\x74\x5f\x69\144"); goto kOjeI; VSDTT: $taxDatas = ["\146\165\156\x64\x5f\x69\x64" => $fundId, "\164\151\164\154\145" => $ffi->title . "\x2d" . Defs::$fundTaxTypeDefs[$taxType], "\x61\x6d\157\165\x6e\164" => $amount, "\164\x79\x70\145" => $taxType, "\x64\141\164\x65" => $ffi->date, "\x66\146\151\137\151\144" => $ffiId]; goto UPJVe; kOjeI: if ($fft_id) { goto Cdx3L; } goto WyyeI; xIMPC: if (!($amount == 0.0)) { goto WjwJx; } goto tmooK; BP0OK: Cdx3L: goto p9pZN; WyyeI: Db::table("\146\x75\156\144\163\x5f\146\x69\156\x61\x6e\x63\x65\x5f\x74\141\170\x65\163")->insert($taxDatas); goto bMaB_; bMaB_: goto vqTrf; goto BP0OK; tmooK: goto FsgHH; goto cIHNX; p9pZN: Db::table("\146\x75\x6e\144\x73\x5f\x66\x69\156\x61\x6e\x63\145\137\164\141\170\x65\x73")->where("\x66\x66\x74\x5f\151\x64", $fft_id)->update($taxDatas); goto DTpZB; pb9Gb: } goto YAE46; XrH14: KyWe8: goto BpW0d; uqd1Y: } public function deleteFinanceIncome($ffiId) { goto qH_7M; FAnIv: return true; goto okWql; he8ua: LDcv5: goto K1Q0e; qH_7M: $model = FundsFinanceIncomes::get($ffiId); goto UbP0X; UbP0X: $model->delete(); goto bnzhq; DubbY: foreach ($taxes as $tax) { $tax->delete(); Is9aE: } goto he8ua; bnzhq: $taxes = FundsFinanceTaxes::all(["\x66\x66\x69\x5f\151\144" => $ffiId]); goto DubbY; YyG1w: $this->deleteFinanceFee($ffiId); goto FAnIv; K1Q0e: $this->deleteFinancePaidByItem($ffiId); goto YyG1w; okWql: } public function loadFinanceSyncSummary($fundId) { $records = Db::table("\x66\165\x6e\x64\x73\x5f\x66\x69\156\141\156\x63\145\x5f\x73\x79\156\143\137\x73\x75\x6d\x6d\141\162\x79")->where("\x66\165\156\x64\x5f\x69\144", $fundId)->field(true)->select(); return $records; } public function getFinanceSyncSummaryInfos($ffsId) { goto Vko9W; Jo6P_: return false; goto im3ND; gzLZg: $infos["\143\157\x6d\x70\x6f\x73\151\164\151\x6f\156"] = json_decode($infos["\x63\157\x6d\160\x6f\163\x69\164\x69\x6f\x6e"], true); goto ib116; HH1VK: if ($infos) { goto oKb8K; } goto Jo6P_; Vko9W: $infos = Db::table("\x66\x75\156\x64\163\137\x66\x69\156\141\x6e\x63\x65\137\x73\x79\156\143\137\163\165\155\155\x61\162\171")->where("\x66\x66\163\137\151\x64", $ffsId)->field(true)->find(); goto HH1VK; ib116: return $infos; goto WBLXa; im3ND: oKb8K: goto gzLZg; WBLXa: } public function addFinanceSyncSummary($fundId, $infos) { goto BVBkE; iqR3B: $datas["\143\x6f\155\x70\157\x73\151\x74\151\x6f\x6e"] = !emptyInArray($infos, "\143\157\155\160\x6f\x73\x69\164\151\x6f\156") ? json_encode($infos["\x63\157\x6d\x70\157\x73\151\164\151\157\x6e"]) : ''; goto PKspr; YRNsn: $datas["\141\x6d\157\165\156\164"] = !emptyInArray($infos, "\x61\x6d\157\165\156\x74") ? $infos["\x61\x6d\157\x75\x6e\x74"] : 0; goto Cb0Oo; PKspr: Db::table("\x66\165\x6e\144\x73\x5f\146\151\x6e\x61\x6e\x63\145\x5f\x73\171\156\143\x5f\x73\165\x6d\155\141\x72\x79")->insert($datas); goto MVOfW; BVBkE: Log::notice("\151\x6e\x66\x6f\163\72\40" . var_export($infos, true)); goto QWYvE; GnSZo: $datas["\146\x75\x6e\x64\137\151\144"] = $fundId; goto YRNsn; QWYvE: $datas = []; goto GnSZo; MVOfW: return true; goto uWVek; Cb0Oo: $datas["\163\x79\x6e\x63\137\144\x61\164\145"] = !emptyInArray($infos, "\x73\x79\156\x63\137\144\141\x74\145") ? $infos["\x73\171\156\143\137\144\x61\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto iqR3B; uWVek: } public function editFinanceSyncSummary($ffsId, $infos) { goto Oq3ew; FsjF8: $datas["\143\x6f\x6d\160\157\x73\x69\x74\151\157\x6e"] = !emptyInArray($infos, "\x63\157\x6d\160\157\x73\151\164\151\x6f\x6e") ? json_encode($infos["\143\x6f\155\160\157\x73\151\164\151\157\x6e"]) : ''; goto mGZpP; OphRg: $datas["\141\x6d\x6f\x75\156\x74"] = !emptyInArray($infos, "\x61\x6d\x6f\165\x6e\164") ? $infos["\x61\155\x6f\x75\156\164"] : 0; goto kPlYJ; mGZpP: Db::table("\x66\165\156\x64\163\x5f\146\x69\156\x61\x6e\143\x65\x5f\x73\171\x6e\143\x5f\163\165\155\155\141\x72\x79")->where("\146\x66\163\x5f\x69\144", $ffsId)->update($datas); goto DeAut; kPlYJ: $datas["\163\x79\156\x63\x5f\x64\x61\164\x65"] = !emptyInArray($infos, "\x73\x79\x6e\143\x5f\144\141\x74\x65") ? $infos["\163\171\x6e\x63\137\144\x61\164\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto FsjF8; DeAut: return true; goto xR6Kx; Oq3ew: $datas = []; goto OphRg; xR6Kx: } public function deleteFinanceSyncSummary($ffsId) { Db::table("\146\x75\x6e\144\x73\x5f\146\151\156\141\x6e\x63\x65\137\163\171\x6e\x63\x5f\x73\165\155\x6d\x61\x72\171")->where("\x66\x66\163\137\151\x64", $ffsId)->delete(); return true; } public function loadFinanceSyncFlow($fundId) { $records = Db::table("\146\165\x6e\144\x73\137\x66\x69\156\141\156\143\145\137\163\171\x6e\x63\x5f\146\154\157\x77")->where("\146\x75\x6e\144\137\151\x64", $fundId)->field(true)->select(); return $records; } public function getFinanceSyncFlowInfos($fffId) { goto XNFOG; aAJkG: if ($infos) { goto sOC9f; } goto wz4_z; fZ3M2: return $infos; goto WFnU9; XNFOG: $infos = Db::table("\146\165\x6e\144\163\x5f\146\151\x6e\x61\x6e\x63\145\x5f\x73\171\x6e\x63\x5f\x66\154\x6f\167")->where("\x66\x66\x66\137\151\x64", $fffId)->field(true)->find(); goto aAJkG; wz4_z: return false; goto zWOCe; zWOCe: sOC9f: goto fZ3M2; WFnU9: } public function addFinanceSyncFlow($fundId, $infos) { goto eoM5Z; aPhX3: Db::table("\146\165\x6e\144\163\x5f\x66\x69\x6e\x61\x6e\143\145\137\x73\171\156\x63\x5f\146\x6c\x6f\x77")->insert($datas); goto dfwgU; eoM5Z: Log::notice("\x69\x6e\146\157\163\x3a\40" . var_export($infos, true)); goto AR1Cs; QAALQ: $datas["\145\156\x74\162\x79\x5f\144\141\164\145"] = !emptyInArray($infos, "\x65\156\164\x72\x79\x5f\144\141\x74\145") ? $infos["\145\156\164\x72\x79\137\x64\141\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto nQrUe; n6WO4: $datas["\145\x6e\x74\162\171\x5f\141\x6d\157\165\x6e\x74"] = !emptyInArray($infos, "\145\x6e\164\x72\171\137\141\155\157\x75\156\164") ? $infos["\145\156\x74\x72\x79\x5f\141\x6d\x6f\x75\156\x74"] : 0; goto QAALQ; xMMVM: $datas["\163\x65\x72\151\x61\x6c\x5f\156\165\155\142\145\162"] = !emptyInArray($infos, "\163\145\162\x69\x61\154\x5f\x6e\165\x6d\142\x65\162") ? $infos["\163\145\162\151\141\154\x5f\156\x75\x6d\x62\x65\162"] : ''; goto n6WO4; nQrUe: $datas["\145\156\164\x72\x79\x5f\x74\171\160\x65"] = !emptyInArray($infos, "\145\156\164\x72\x79\137\164\171\x70\x65") ? $infos["\145\156\x74\x72\x79\137\164\171\x70\145"] : Defs::FUND_BANK_SYNC_FLOW_IN_TYPE; goto YnTH2; p7qw6: $datas["\146\x75\156\144\137\x69\144"] = $fundId; goto xMMVM; YnTH2: $datas["\145\156\x74\162\171\x5f\163\x75\x6d\x6d\141\x72\171"] = !emptyInArray($infos, "\x65\x6e\x74\x72\x79\x5f\163\165\155\155\x61\162\171") ? $infos["\145\x6e\164\162\171\x5f\163\165\x6d\155\x61\x72\x79"] : ''; goto aPhX3; dfwgU: return true; goto XEOVq; AR1Cs: $datas = []; goto p7qw6; XEOVq: } public function editFinanceSyncFlow($fffId, $infos) { goto GSo0y; KMgvY: Db::table("\x66\x75\156\144\163\x5f\x66\151\156\141\156\143\145\x5f\x73\x79\x6e\x63\x5f\146\154\x6f\167")->where("\146\x66\x66\137\x69\x64", $fffId)->update($datas); goto CaauE; GSo0y: $datas = []; goto s2ZMY; EjSB7: $datas["\145\156\164\x72\x79\x5f\163\x75\155\x6d\141\x72\171"] = !emptyInArray($infos, "\x65\x6e\x74\162\x79\137\163\165\x6d\155\x61\162\171") ? $infos["\x65\156\164\162\171\137\x73\165\x6d\155\x61\x72\x79"] : ''; goto KMgvY; CaauE: return true; goto q3bPa; so73m: $datas["\x65\156\164\162\x79\x5f\x74\171\x70\x65"] = !emptyInArray($infos, "\x65\156\164\162\x79\137\x74\171\x70\145") ? $infos["\145\x6e\164\162\x79\x5f\164\x79\160\x65"] : Defs::FUND_BANK_SYNC_FLOW_IN_TYPE; goto EjSB7; s2ZMY: $datas["\x73\145\x72\x69\x61\x6c\137\156\x75\x6d\142\145\x72"] = !emptyInArray($infos, "\163\x65\x72\151\141\x6c\x5f\156\165\155\142\x65\x72") ? $infos["\x73\145\162\151\141\154\137\156\x75\x6d\142\x65\x72"] : ''; goto qRLJL; RpcBN: $datas["\x65\156\x74\162\171\x5f\144\x61\164\x65"] = !emptyInArray($infos, "\x65\156\164\162\171\137\144\x61\x74\145") ? $infos["\x65\x6e\164\x72\171\137\x64\141\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto so73m; qRLJL: $datas["\x65\156\164\162\x79\x5f\x61\155\157\x75\156\164"] = !emptyInArray($infos, "\145\156\x74\x72\x79\x5f\x61\155\x6f\165\x6e\x74") ? $infos["\145\156\164\162\171\x5f\141\155\x6f\x75\156\164"] : 0; goto RpcBN; q3bPa: } public function deleteFinanceSyncFlow($fffId) { Db::table("\146\165\156\x64\x73\137\146\151\x6e\x61\x6e\x63\145\x5f\x73\x79\156\143\x5f\146\154\157\167")->where("\x66\146\146\x5f\x69\144", $fffId)->delete(); return true; } public function loadFinanceTaxes($fundId) { goto xm4hx; HBd8y: return ["\164\x6f\164\x61\154" => count($records), "\162\x6f\167\163" => $records, "\146\157\x6f\164\145\x72" => [["\146\x66\x74\x5f\151\144" => 0, "\x74\151\164\154\x65" => "\346\200\273\xe8\xae\xa1", "\141\x6d\157\165\x6e\164" => $totalAmount, "\141\143\164\165\141\x6c\137\x61\155\157\x75\156\x74" => $totalActualAmount]]]; goto ZQRX7; FXJxi: foreach ($records as &$record) { goto imnra; luVcD: $totalAmount += $record["\x61\x6d\x6f\165\156\164"]; goto Wp5cS; LZgvw: $record["\163\x74\141\164\x75\163"] = $this->getPaidStatus($record["\x61\x6d\157\x75\156\x74"], $actualAmount); goto aihaq; Wp5cS: $totalActualAmount += $record["\x61\143\x74\165\141\x6c\137\x61\x6d\x6f\165\x6e\164"]; goto LZgvw; imnra: $actualAmount = $this->getTotalPaidAmount(self::FUND_FINANCE_PAID_ITEM_TAX_TYPE, $record["\x66\146\164\x5f\151\x64"]); goto x9QHC; x9QHC: $record["\141\143\x74\x75\141\x6c\137\141\155\x6f\165\x6e\164"] = sprintf("\45\x2e\x32\x66", $actualAmount); goto luVcD; aihaq: uM6Wx: goto ooPFc; ooPFc: } goto oGiP_; oDZSb: $totalActualAmount = 0.0; goto FXJxi; oGiP_: oUtZC: goto HBd8y; xuX0o: $totalAmount = 0.0; goto oDZSb; xm4hx: $records = Db::table("\x66\165\x6e\144\x73\137\x66\x69\156\141\156\143\x65\137\x74\x61\170\x65\163")->where("\146\165\156\x64\137\x69\144", $fundId)->order("\x66\x66\x74\x5f\151\x64\x20\144\145\163\143")->field(true)->select(); goto xuX0o; ZQRX7: } public function getFinanceTaxInfos($fftId) { goto sS0Q4; eu7Tj: if ($infos) { goto U8sPG; } goto kM9Em; sS0Q4: $infos = Db::table("\146\x75\156\x64\x73\137\x66\151\156\141\156\143\x65\137\x74\x61\170\x65\163")->where("\x66\146\164\x5f\x69\144", $fftId)->field(true)->find(); goto eu7Tj; QufSw: return $infos; goto Ey943; kM9Em: return false; goto wjA16; wjA16: U8sPG: goto QufSw; Ey943: } public function addFinanceTax($fundId, $infos) { goto yoY2V; Dhl60: $datas["\x64\141\164\x65"] = !emptyInArray($infos, "\x64\141\164\x65") ? $infos["\x64\141\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto br3Nq; br3Nq: $datas["\x66\146\x69\x5f\151\144"] = !emptyInArray($infos, "\x66\146\x69\137\x69\x64") ? $infos["\146\146\x69\x5f\151\144"] : 0; goto Pb6kE; zBc33: return true; goto l_V1E; QM963: $model->data($datas); goto wwQEg; bJpbn: $datas["\x61\155\x6f\165\x6e\164"] = !emptyInArray($infos, "\141\x6d\157\165\156\x74") ? $infos["\141\x6d\x6f\165\156\164"] : 0; goto Qau_Y; Pb6kE: $model = model("\x46\x75\x6e\144\163\106\151\156\x61\x6e\x63\x65\124\x61\x78\x65\163"); goto QM963; yoY2V: $datas = []; goto pNWAV; wwQEg: $model->save(); goto ImzVo; Ef4pR: $datas["\x74\x79\x70\145"] = !emptyInArray($infos, "\164\x79\x70\x65") ? $infos["\x74\x79\160\145"] : Defs::FUND_TAX_VALUEADD_TYPE; goto bJpbn; Qau_Y: $datas["\x74\x69\164\154\x65"] = !emptyInArray($infos, "\x74\151\x74\154\145") ? $infos["\x74\151\x74\154\145"] : ''; goto Dhl60; pNWAV: $datas["\146\165\156\144\137\151\x64"] = $fundId; goto Ef4pR; ImzVo: $fftId = $model->fft_id; goto zBc33; l_V1E: } public function editFinanceTax($fftId, $infos) { goto uGCCS; j3u2_: $datas["\x74\x69\164\x6c\145"] = !emptyInArray($infos, "\164\x69\x74\x6c\145") ? $infos["\164\151\164\x6c\x65"] : ''; goto ZAgZM; n0WJo: EwrEm: goto kzUBt; cb7IF: $datas["\x61\155\x6f\165\156\x74"] = !emptyInArray($infos, "\x61\155\157\x75\156\x74") ? $infos["\141\155\157\165\x6e\164"] : 0; goto j3u2_; wnPgh: return true; goto M6L1R; HfD3U: $model->save(); goto wnPgh; ZAgZM: $datas["\144\x61\x74\x65"] = !emptyInArray($infos, "\144\141\x74\x65") ? $infos["\144\x61\164\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto mFWvB; cYmij: if ($model) { goto EwrEm; } goto dBMxO; ajtiT: $datas["\x74\x79\x70\145"] = !emptyInArray($infos, "\x74\171\x70\145") ? $infos["\164\171\x70\145"] : Defs::FUND_TAX_VALUEADD_TYPE; goto cb7IF; uGCCS: $model = FundsFinanceTaxes::get($fftId); goto cYmij; kzUBt: $datas = []; goto ajtiT; dBMxO: return false; goto n0WJo; mFWvB: $model->data($datas); goto HfD3U; M6L1R: } public function deleteFinanceTax($fftId) { goto sWZ0q; dKuVJ: Hd6fL: goto IwPPw; sWZ0q: $model = FundsFinanceTaxes::get($fftId); goto Q7RLZ; IwPPw: $model->delete(); goto CEKKP; vp4yj: return true; goto ufEsA; GBn57: return false; goto dKuVJ; Q7RLZ: if ($model) { goto Hd6fL; } goto GBn57; CEKKP: $this->deleteFinancePaidByItem($fftId); goto vp4yj; ufEsA: } public function loadFinanceEnterprises($fundId) { goto Qpa67; jSj87: return ["\164\x6f\x74\x61\154" => count($records), "\162\x6f\167\163" => $records, "\x66\x6f\x6f\164\x65\x72" => [["\x66\146\x65\x5f\x69\x64" => 0, "\x74\x69\x74\154\x65" => "\xe6\200\xbb\350\xae\xa1", "\x61\x6d\157\x75\156\x74" => $totalAmount, "\141\x63\x74\165\141\154\x5f\141\155\157\165\x6e\x74" => $totalActualAmount]]]; goto Tyjqn; gDZF8: $totalActualAmount = 0.0; goto woX2V; w4kGZ: $totalAmount = 0.0; goto gDZF8; woX2V: foreach ($records as &$record) { goto XCnMf; DZzEt: $totalAmount += $record["\141\x6d\x6f\165\156\x74"]; goto BgZ3S; kN7Y3: $record["\x61\x63\164\x75\141\154\137\141\x6d\157\165\156\x74"] = sprintf("\x25\x2e\x32\x66", $actualAmount); goto DZzEt; LGa1H: S68m8: goto mJE29; BgZ3S: $totalActualAmount += $record["\x61\x63\x74\165\141\x6c\137\x61\x6d\157\165\156\164"]; goto ssRmH; XCnMf: $actualAmount = $this->getTotalPaidAmount(self::FUND_FINANCE_PAID_ITEM_ENTERPRISE_TYPE, $record["\146\146\145\x5f\151\144"]); goto kN7Y3; ssRmH: $record["\x73\x74\x61\164\165\163"] = $this->getPaidStatus($record["\141\155\157\165\156\164"], $actualAmount); goto LGa1H; mJE29: } goto l0vLp; l0vLp: KEaVH: goto jSj87; Qpa67: $records = Db::table("\x66\x75\x6e\144\x73\137\x66\x69\156\x61\156\x63\x65\137\145\156\164\x65\162\x70\162\151\163\145\163")->alias("\x46\106\x45")->join("\145\x6e\164\145\x72\160\162\x69\163\145\x73\40\x45", "\x46\x46\x45\x2e\145\156\164\x65\162\x70\x72\x69\x73\x65\137\151\144\x3d\x45\x2e\x69\x64", "\x4c\x45\x46\x54")->where("\146\x75\156\x64\137\151\144", $fundId)->order("\146\146\x65\x5f\151\144\40\144\x65\x73\x63")->field("\106\106\x45\x2e\52\54\105\x2e\x6e\x61\x6d\x65")->select(); goto w4kGZ; Tyjqn: } public function getEnterpriseStatisticByFund($fundId) { goto UOhcf; tgBJr: mlsI0: goto EPi6A; MCdMF: $amount = Db::table("\146\165\x6e\x64\163\137\x66\151\x6e\x61\x6e\143\145\137\145\x6e\x74\x65\x72\x70\162\151\x73\x65\x73")->where("\x66\x75\x6e\144\137\x69\x64", $fundId)->order("\x66\146\x65\x5f\151\x64\40\x64\x65\x73\143")->field(true)->sum("\141\x6d\157\165\x6e\x74"); goto S4BfI; S4BfI: if (!($amount === null)) { goto mlsI0; } goto LV1GB; EPi6A: return ["\143\157\165\x6e\164" => $count, "\141\155\157\x75\x6e\164" => $amount]; goto PHA2f; UOhcf: $count = 0; goto nW_k9; gsAQA: $amount = 0; goto MCdMF; nW_k9: $records = Db::table("\146\x75\156\144\163\x5f\x65\156\x74\145\162\x70\162\x69\163\x65\x73")->where("\x66\165\156\x64\x5f\x69\x64", $fundId)->order("\151\x64\x20\x64\145\163\x63")->field(true)->select(); goto QvNYo; QvNYo: $count = count($records); goto gsAQA; LV1GB: $amount = 0; goto tgBJr; PHA2f: } public function getFinanceEnterpriseInfos($ffeId) { goto RjUYO; bZXlt: return $infos; goto CxztM; RjUYO: $infos = Db::table("\x66\165\x6e\144\x73\137\146\151\x6e\x61\x6e\143\x65\137\145\156\x74\x65\x72\160\x72\151\163\145\x73")->where("\146\x66\145\x5f\x69\144", $ffeId)->field(true)->find(); goto fOJe0; fOJe0: if ($infos) { goto O3cPM; } goto fqWzi; YrFLf: O3cPM: goto bZXlt; fqWzi: return false; goto YrFLf; CxztM: } public function addFinanceEnterprise($fundId, $infos) { goto LSdz3; HMdjI: $model->save(); goto Br17u; uagDk: return $ffeId; goto v2VSS; Br17u: $ffeId = $model->ffe_id; goto uagDk; qMnEg: $datas["\x74\151\x74\x6c\145"] = !emptyInArray($infos, "\164\151\164\154\x65") ? $infos["\164\151\164\x6c\145"] : ''; goto n7IqK; MVcVQ: $datas["\x66\x75\x6e\x64\x5f\151\x64"] = $fundId; goto ujE0X; SYjBS: $model = model("\106\165\156\144\x73\x46\x69\x6e\141\x6e\x63\145\x45\156\164\145\x72\160\x72\x69\x73\145\x73"); goto jLEL2; jLEL2: $model->data($datas); goto HMdjI; ujE0X: $datas["\141\x6d\x6f\x75\156\164"] = !emptyInArray($infos, "\x61\155\x6f\x75\x6e\x74") ? $infos["\141\155\x6f\x75\156\164"] : 0; goto qMnEg; LSdz3: $datas = []; goto MVcVQ; n7IqK: $datas["\x64\x61\164\x65"] = !emptyInArray($infos, "\144\141\x74\x65") ? $infos["\x64\141\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto KdVSo; KdVSo: $datas["\x65\x6e\164\145\162\x70\x72\151\x73\145\x5f\151\x64"] = !emptyInArray($infos, "\145\156\164\x65\x72\x70\x72\151\x73\145\x5f\x69\x64") ? $infos["\x65\x6e\164\x65\x72\x70\162\x69\x73\x65\137\x69\144"] : 0; goto SYjBS; v2VSS: } public function editFinanceEnterprise($ffeId, $infos) { goto eyW26; c6Y_O: return false; goto QLNh3; eyW26: $datas = []; goto Ur_pG; QLNh3: ZK8cC: goto wnPcR; v6X9r: return true; goto sWmGl; Ur_pG: $datas["\x61\155\157\165\156\164"] = !emptyInArray($infos, "\141\x6d\x6f\x75\x6e\164") ? $infos["\141\155\x6f\x75\156\164"] : 0; goto FPRal; eeyr0: $model = FundsFinanceEnterprises::get($ffeId); goto y3rX_; F8lC9: $datas["\x64\141\x74\145"] = !emptyInArray($infos, "\144\x61\x74\x65") ? $infos["\x64\x61\164\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto dZMk6; dZMk6: $datas["\x65\156\164\x65\x72\160\x72\151\x73\145\x5f\151\144"] = !emptyInArray($infos, "\145\156\164\x65\x72\x70\x72\x69\163\x65\x5f\x69\144") ? $infos["\x65\x6e\x74\x65\162\160\162\151\x73\145\x5f\x69\x64"] : 0; goto eeyr0; wnPcR: $model->data($datas); goto nutVe; y3rX_: if ($model) { goto ZK8cC; } goto c6Y_O; FPRal: $datas["\164\151\164\x6c\145"] = !emptyInArray($infos, "\x74\x69\164\154\145") ? $infos["\164\x69\x74\154\145"] : ''; goto F8lC9; nutVe: $model->save(); goto v6X9r; sWmGl: } public function deleteFinanceEnterprise($ffeId) { goto g02I8; g02I8: $model = FundsFinanceEnterprises::get($ffeId); goto eAU60; uXPGE: $this->deleteFinancePaidByItem($ffeId); goto LHijs; C9md2: TW3Tq: goto oIFdO; oIFdO: $model->delete(); goto uXPGE; eAU60: if ($model) { goto TW3Tq; } goto aUqze; LHijs: return true; goto Q11Gq; aUqze: return false; goto C9md2; Q11Gq: } protected function checkFinancePaidAddAmount($itemType, $itemId, $actualAmount) { goto DulIC; NZ_Ah: kwFOb: goto dwkTG; XaEJK: if (!($requiredAmount === null)) { goto kwFOb; } goto KMsf8; EmeZb: Amxlp: goto R8dP5; P6i9i: if (!($currentAmount + $actualAmount > $requiredAmount)) { goto Amxlp; } goto FsI2t; tlnux: $currentAmount = 0; goto upSlC; DulIC: $requiredAmount = Db::table(self::$fundFinanceTableDefs[$itemType])->where(self::$fundFinanceIdFieldDefs[$itemType], $itemId)->value("\x61\155\x6f\x75\x6e\164"); goto XaEJK; FsI2t: return false; goto EmeZb; dwkTG: $currentAmount = Db::table("\x66\165\156\144\163\137\x66\x69\156\141\x6e\x63\145\137\160\x61\151\x64")->where(["\151\x74\145\x6d\137\151\144" => $itemId, "\151\x74\x65\x6d\x5f\164\171\x70\145" => $itemType])->sum("\x61\x63\x74\x75\x61\x6c\x5f\141\x6d\x6f\165\x6e\x74"); goto Jhjvk; R8dP5: return true; goto eemA3; Jhjvk: if (!($currentAmount === null)) { goto mnQgo; } goto tlnux; upSlC: mnQgo: goto P6i9i; KMsf8: $requiredAmount = 0; goto NZ_Ah; eemA3: } protected function checkFinancePaidEditAmount($id, $actualAmount) { goto IFwp1; YDltW: $itemType = $existPaid["\x69\x74\x65\155\137\x74\x79\x70\145"]; goto M4trO; tfjCS: J5vxv: goto c1PP5; i1SDf: if (!($requiredAmount === null)) { goto S2NLE; } goto X1XJH; D0vd9: $currentAmount = 0; goto tfjCS; x7XoA: return true; goto efKow; dDoRO: return false; goto SwKzX; IFwp1: $existPaid = Db::table("\146\165\x6e\x64\x73\137\x66\x69\156\x61\x6e\143\x65\137\x70\x61\x69\x64")->where("\x69\x64", $id)->field(true)->find(); goto RcUt2; eghGM: $requiredAmount = Db::table(self::$fundFinanceTableDefs[$itemType])->where(self::$fundFinanceIdFieldDefs[$itemType], $itemId)->value("\141\x6d\x6f\165\x6e\x74"); goto i1SDf; RcUt2: if ($existPaid) { goto yEygN; } goto dDoRO; ig0x7: $currentAmount = Db::table("\146\165\156\144\x73\137\x66\x69\156\x61\156\143\145\137\x70\x61\151\144")->where(["\x69\164\x65\155\137\x69\144" => $itemId, "\x69\164\145\155\x5f\164\x79\160\x65" => $itemType])->where("\151\144", "\74\76", $id)->sum("\x61\143\x74\165\x61\x6c\x5f\141\155\x6f\x75\156\164"); goto SZ7zT; M4trO: $itemId = $existPaid["\151\x74\145\x6d\x5f\x69\144"]; goto eghGM; X1XJH: $requiredAmount = 0; goto Jz6Fp; Jz6Fp: S2NLE: goto ig0x7; rIzca: KCQpP: goto x7XoA; GHBOR: return false; goto rIzca; SZ7zT: if (!($currentAmount === null)) { goto J5vxv; } goto D0vd9; SwKzX: yEygN: goto YDltW; c1PP5: if (!($currentAmount + $actualAmount > $requiredAmount)) { goto KCQpP; } goto GHBOR; efKow: } public function loadFinancePaid($itemType, $itemId) { $records = Db::table("\x66\165\156\144\163\137\146\x69\x6e\x61\156\x63\x65\137\x70\141\x69\144")->where(["\x69\x74\145\x6d\137\151\144" => $itemId, "\x69\164\x65\155\137\164\171\160\145" => $itemType])->order("\151\x64\40\x64\x65\163\x63")->field(true)->select(); return $records; } public function getFinancePaidInfos($id) { goto hOr2I; hOr2I: $infos = Db::table("\x66\165\x6e\144\163\x5f\x66\151\156\x61\156\143\145\x5f\160\x61\x69\x64")->where("\151\144", $id)->field(true)->find(); goto DQ0yC; WKDli: UL8eU: goto tQF_j; Mo0M5: return false; goto WKDli; DQ0yC: if ($infos) { goto UL8eU; } goto Mo0M5; tQF_j: return $infos; goto clh2J; clh2J: } public function addFinancePaid($itemType, $itemId, $infos) { goto Uq5A7; IGkPY: exception("\xe6\240\xb8\xe9\224\200\xe9\x87\221\xe9\242\235\xe8\266\205\345\x87\xba\xe4\xba\206\xe6\x80\273\xe9\207\221\xe9\xa2\235"); goto KJbbB; zmr7p: if ($this->checkFinancePaidAddAmount($itemType, $itemId, $datas["\141\143\164\x75\141\154\x5f\x61\x6d\x6f\x75\156\x74"])) { goto R7_oJ; } goto IGkPY; CRUmr: $datas["\x69\x74\145\155\x5f\x69\x64"] = $itemId; goto uK9bb; Uq5A7: $datas = []; goto CRUmr; KJbbB: R7_oJ: goto VVqvX; uK9bb: $datas["\x69\164\145\x6d\x5f\164\x79\x70\x65"] = $itemType; goto OiPgZ; OiPgZ: $datas["\x61\x63\164\x75\x61\154\x5f\141\x6d\x6f\165\x6e\x74"] = !emptyInArray($infos, "\x61\143\164\x75\x61\154\x5f\x61\155\x6f\165\x6e\x74") ? $infos["\141\143\x74\x75\x61\154\x5f\x61\x6d\x6f\x75\156\164"] : 0; goto klGqI; VVqvX: Db::table("\x66\165\156\144\x73\137\x66\x69\156\x61\156\143\x65\137\160\141\x69\144")->insert($datas); goto PyTfw; PyTfw: return true; goto lfLRp; klGqI: $datas["\160\x61\x79\137\144\x61\x74\145"] = !emptyInArray($infos, "\160\x61\x79\137\x64\141\x74\145") ? $infos["\x70\x61\x79\x5f\x64\x61\x74\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto zmr7p; lfLRp: } public function editFinancePaid($id, $infos) { goto esJbo; mhbeo: APM50: goto a7Qws; pam5v: if ($this->checkFinancePaidEditAmount($id, $datas["\x61\143\164\x75\141\154\x5f\x61\155\x6f\x75\156\x74"])) { goto APM50; } goto rMr4N; mB2Ui: return true; goto jt_Cq; rMr4N: exception("\xe6\xa0\270\351\224\x80\351\207\x91\351\242\235\xe8\266\205\345\x87\xba\xe4\272\206\xe6\200\xbb\351\x87\x91\351\242\235"); goto mhbeo; Cspsg: $datas["\x70\x61\x79\x5f\x64\141\164\145"] = !emptyInArray($infos, "\160\x61\171\x5f\x64\141\x74\x65") ? $infos["\160\x61\171\137\x64\x61\x74\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto pam5v; esJbo: $datas = []; goto npDeC; a7Qws: Db::table("\x66\165\x6e\144\163\x5f\146\x69\156\x61\156\x63\145\x5f\x70\x61\x69\144")->where("\x69\x64", $id)->update($datas); goto mB2Ui; npDeC: $datas["\141\x63\164\x75\141\154\137\141\155\x6f\x75\x6e\x74"] = !emptyInArray($infos, "\141\143\x74\x75\x61\154\137\141\155\x6f\165\x6e\x74") ? $infos["\x61\143\x74\165\141\154\x5f\x61\155\157\165\x6e\x74"] : 0; goto Cspsg; jt_Cq: } public function deleteFinancePaid($id) { Db::table("\x66\x75\156\144\163\x5f\146\151\x6e\x61\x6e\x63\145\137\160\141\151\x64")->where("\x69\144", $id)->delete(); return true; } public function deleteFinancePaidByItem($itemId) { Db::table("\146\165\156\144\x73\x5f\146\x69\x6e\x61\x6e\x63\x65\x5f\x70\x61\x69\144")->where("\151\164\x65\x6d\x5f\x69\x64", $itemId)->delete(); return true; } public function getTotalPaidAmount($itemType, $itemId) { goto RV016; S_oYV: return $totalAmount; goto nbT2F; RV016: $totalAmount = Db::table("\146\165\x6e\144\x73\137\146\151\x6e\141\156\x63\x65\137\160\x61\151\144")->where(["\x69\164\x65\x6d\x5f\151\x64" => $itemId, "\x69\x74\145\x6d\137\x74\x79\x70\145" => $itemType])->sum("\x61\143\164\165\141\154\137\141\155\x6f\165\156\164"); goto UeSkO; X2Kcj: eFuS1: goto S_oYV; wOZFx: $totalAmount = 0.0; goto X2Kcj; UeSkO: if (!($totalAmount === null)) { goto eFuS1; } goto wOZFx; nbT2F: } public function batchFinancePaid($itemType, $infos) { goto LePUr; F_l3K: foreach ($items as $itemId) { goto qMfbz; tfxhL: $currentAmount = Db::table("\146\165\x6e\144\163\137\146\x69\x6e\x61\x6e\143\145\x5f\x70\141\x69\144")->where(["\151\164\145\155\137\151\144" => $itemId, "\x69\164\145\x6d\x5f\164\x79\x70\145" => $itemType])->sum("\x61\143\x74\165\141\x6c\137\x61\x6d\157\165\x6e\x74"); goto W4PWA; yzTRk: Rhrvm: goto MQLc_; JrySF: $currentAmount = 0; goto Xj4ot; SCrdV: $requiredAmount = 0; goto h3AIo; qMfbz: $requiredAmount = Db::table(self::$fundFinanceTableDefs[$itemType])->where(self::$fundFinanceIdFieldDefs[$itemType], $itemId)->value("\x61\155\x6f\x75\156\164"); goto ihtBS; nhaNK: $datas["\160\x61\x79\x5f\144\141\164\x65"] = $payDate; goto wRxX4; jRbrz: $datas["\x69\x74\x65\155\x5f\164\171\160\145"] = $itemType; goto bzkqY; W2GKf: if (!($currentAmount == $requiredAmount)) { goto z0W5V; } goto iI1jI; StNM6: goto Rhrvm; goto A0kMk; wRxX4: Db::table("\x66\165\156\x64\163\137\146\x69\156\x61\156\x63\x65\x5f\160\141\x69\144")->insert($datas); goto yzTRk; iI1jI: goto Rhrvm; goto oC6Tj; bJvH4: $datas["\151\164\145\x6d\137\151\x64"] = $itemId; goto jRbrz; YujgB: $actualAmount = $requiredAmount - $currentAmount; goto Hp_UH; A0kMk: TfapR: goto RF1qX; Hp_UH: if (!($actualAmount < 0)) { goto TfapR; } goto StNM6; RF1qX: $datas = []; goto bJvH4; W4PWA: if (!($currentAmount === null)) { goto ITQ9c; } goto JrySF; h3AIo: vm2sK: goto tfxhL; oC6Tj: z0W5V: goto YujgB; ihtBS: if (!($requiredAmount === null)) { goto vm2sK; } goto SCrdV; bzkqY: $datas["\141\143\164\165\x61\x6c\x5f\x61\155\157\165\x6e\x74"] = $actualAmount; goto nhaNK; Xj4ot: ITQ9c: goto W2GKf; MQLc_: } goto zRFzc; gBjnV: $payDate = !emptyInArray($infos, "\160\x61\x79\137\144\x61\164\x65") ? $infos["\x70\141\x79\x5f\144\141\164\145"] : Defs::DEFAULT_DB_DATE_VALUE; goto F_l3K; HYd8Q: return true; goto RWjHZ; LePUr: $items = !emptyInArray($infos, "\151\164\145\155\x73") ? $infos["\x69\164\145\x6d\163"] : []; goto gBjnV; zRFzc: DirfD: goto HYd8Q; RWjHZ: } }
