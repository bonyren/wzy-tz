<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; class Redis extends Base { protected function __construct() { parent::__construct(); } public static function genDdKey($fundId, $enterpriseId) { $key = "\104\104\137{$fundId}\137{$enterpriseId}"; return $key; } public function setData($key, $jsonStr) { goto fLBIQ; dW7G3: if ($existCount > 0) { goto Hymsv; } goto F79Hm; fLBIQ: $existCount = Db::table("\162\145\x64\x69\x73")->where("\153\x65\171", $key)->count(); goto dW7G3; F79Hm: Db::table("\162\145\144\151\x73")->insert(["\x6b\x65\x79" => $key, "\166\x61\154\165\x65" => $jsonStr]); goto t3BDb; u5jRd: Db::table("\x72\x65\144\151\163")->where("\153\x65\171", $key)->update(["\x76\141\x6c\165\x65" => $jsonStr]); goto CQp6g; u2QO7: Hymsv: goto u5jRd; CQp6g: dX0Ck: goto z3Jd1; t3BDb: goto dX0Ck; goto u2QO7; z3Jd1: } public function getData($key) { $jsonStr = Db::table("\162\x65\144\x69\163")->where("\153\145\x79", $key)->value("\x76\141\154\x75\x65"); return $jsonStr; } }
