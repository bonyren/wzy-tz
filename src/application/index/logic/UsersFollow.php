<?php
 namespace app\index\logic; use think\Db; use think\Session; class UsersFollow extends Base { const TYPE_PROJECT = 1; public function addFollow($target_type, $target_id, $user_id = 0) { goto PoYZ5; ksyNF: m8tOR: goto shhPc; shhPc: Db::table("\165\x73\145\x72\x73\x5f\x66\x6f\x6c\154\157\x77")->insert(["\165\163\x65\162\x5f\x69\x64" => $user_id, "\164\141\162\x67\145\x74\137\164\x79\x70\x65" => $target_type, "\164\141\x72\147\x65\x74\137\151\x64" => $target_id]); goto LIBHg; PoYZ5: if (!empty($user_id)) { goto m8tOR; } goto FHkF_; FHkF_: $user_id = Session::get("\x75\163\145\162\x69\144"); goto ksyNF; LIBHg: } public function cancelFollow($target_type, $target_id, $user_id = 0) { goto nCUMv; Btqw_: Db::table("\x75\x73\x65\162\163\137\x66\x6f\x6c\154\157\167")->where(["\x75\163\x65\162\x5f\151\x64" => $user_id, "\164\141\x72\x67\x65\x74\137\164\x79\x70\x65" => $target_type, "\x74\141\x72\x67\145\x74\x5f\151\144" => $target_id])->delete(); goto Xu2Th; HP1HF: $user_id = Session::get("\165\x73\x65\x72\151\x64"); goto teJ1A; nCUMv: if (!empty($user_id)) { goto TS_QI; } goto HP1HF; teJ1A: TS_QI: goto Btqw_; Xu2Th: } public function getMyFollows($target_type = 0, $user_id = 0) { goto krk8G; bhW8E: $rows = []; goto OfDJE; iLaca: if ($target_type) { goto t3QQM; } goto prosz; dsrQn: rXlRa: goto mFDzY; dZjLB: goto rXlRa; goto tdKgH; krk8G: $where = []; goto BVsGC; F6iG4: $where["\x74\x61\x72\147\145\164\x5f\x74\171\x70\145"] = $target_type; goto dxXpo; BVsGC: if (!empty($user_id)) { goto UlPXl; } goto zqHgG; OfDJE: UuJ0p: goto Vn0za; CV7uZ: $where["\165\163\x65\x72\137\151\x64"] = $user_id; goto iLaca; dxXpo: $rows = Db::table("\x75\x73\145\162\163\x5f\146\157\x6c\x6c\157\167")->where($where)->column("\x69\144\x2c\164\141\162\x67\x65\x74\x5f\164\171\160\x65", "\x74\x61\x72\147\145\164\x5f\151\x64"); goto dsrQn; zqHgG: $user_id = Session::get("\x75\x73\x65\x72\x69\144"); goto xd95x; tdKgH: t3QQM: goto F6iG4; xd95x: UlPXl: goto CV7uZ; Vn0za: return $rows; goto A4_aT; prosz: $rows = Db::table("\165\163\x65\162\163\x5f\146\157\x6c\154\157\167")->field("\164\141\162\147\x65\x74\x5f\x74\x79\x70\x65\54\164\141\x72\x67\x65\x74\137\151\x64")->where($where)->select(); goto dZjLB; mFDzY: if (!empty($rows)) { goto UuJ0p; } goto bhW8E; A4_aT: } }
