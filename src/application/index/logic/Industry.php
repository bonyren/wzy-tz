<?php
 namespace app\index\logic; use think\Db; class Industry extends Base { const TABLE = "\x69\x6e\x64\165\163\x74\162\x69\x65\x73"; public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\144", $order = "\x64\x65\x73\143") { goto hnKPp; L1Zjj: $where["\156\x61\155\x65"] = ["\154\151\153\x65", "\45" . $search["\156\141\155\x65"] . "\x25"]; goto gFcH8; gFcH8: YuvPa: goto j4qFQ; nwF9r: muM34: goto ZHyND; twlbu: if (!empty($count)) { goto muM34; } goto CVAB6; PGgVt: if (emptyInArray($search, "\x6e\x61\155\145")) { goto YuvPa; } goto L1Zjj; hnKPp: $order = $sort . "\40" . $order; goto Sp9CM; j4qFQ: $count = Db::table(self::TABLE)->where($where)->count(); goto twlbu; Sp9CM: $where = ["\144\145\x6c\x65\x74\x65\x64" => 0]; goto PGgVt; ZHyND: $items = Db::table(self::TABLE)->where($where)->page($page, $rows)->order($order)->select(); goto b9beo; b9beo: return ["\164\x6f\x74\141\x6c" => $count, "\x72\157\167\x73" => $items]; goto XVJq2; CVAB6: return []; goto nwF9r; XVJq2: } public function getRow($id) { goto sBWLp; SlKEU: wVpnU: goto v4cfw; sBWLp: if (!empty($id)) { goto wVpnU; } goto ccRwR; KE2Pj: return $row; goto JxTMx; ccRwR: return false; goto SlKEU; v4cfw: $row = Db::table(self::TABLE)->where("\x69\x64", $id)->find(); goto KE2Pj; JxTMx: } public function getDefaultRow() { return ["\x6e\x61\155\x65" => '', "\x64\145\x73\143\x72\x69\x70\x74\151\157\156" => '', "\x69\x64" => 0, "\x63\x6f\162\x65\137\144\x61\x74\141" => '']; } public function saveRow($id, $data) { goto P0Z10; Ayh5h: $id = Db::table(self::TABLE)->insert($data, false, true); goto mmZRq; J1H39: if (!(isset($data["\156\141\x6d\145"]) && empty($data["\x6e\141\155\x65"]))) { goto yMzXs; } goto HOI8V; siBAi: Db::table(self::TABLE)->where("\151\144", $id)->update($data); goto v0acl; XLqW7: $data["\x6e\x61\155\145"] = trim($data["\156\x61\x6d\x65"]); goto DdVw8; nJPs0: ii5SY: goto XLqW7; ZTcYo: return $id; goto IPvrS; DdVw8: if (!empty($data["\156\141\x6d\145"])) { goto Lp5PN; } goto i8ec8; mmZRq: vzL0n: goto ZTcYo; ogUPB: Lp5PN: goto Ayh5h; HOI8V: exception("\xe8\xa1\x8c\xe4\xb8\x9a\345\220\215\xe7\247\260\344\xb8\x8d\xe8\x83\275\344\xb8\xba\347\xa9\xba"); goto nOuYB; v0acl: goto vzL0n; goto nJPs0; i8ec8: exception("\xe8\xa1\214\xe4\xb8\232\xe5\x90\x8d\xe7\247\xb0\344\xb8\215\350\x83\275\xe4\xb8\272\xe7\xa9\xba"); goto ogUPB; nOuYB: yMzXs: goto siBAi; P0Z10: $data["\x63\x72\145\141\x74\145\144\137\x62\x79"] = \app\index\service\RequestContext::I()->loginUserId; goto DAxI7; DAxI7: if (empty($id)) { goto ii5SY; } goto J1H39; IPvrS: } public function delete($id) { $result = Db::table(self::TABLE)->where("\151\x64", $id)->setField("\x64\145\x6c\x65\164\x65\144", 1); return $result > 0 ? true : false; } }
