<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; use app\index\logic\Defs; use app\index\service\EventLogs; use app\index\logic\FundsFinance as FundsFinanceLogic; class Dd extends Base { public function load($page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\146\165\x6e\x64\x5f\x69\144", $order = "\141\163\143") { goto WRAli; ij3ef: $order = "\x66\165\x6e\x64\x5f\x69\x64\40\141\163\143"; goto NFBoB; Ll_eY: if ($sort == "\x66\165\x6e\144\137\151\x64") { goto JfpxF; } goto ij3ef; NFBoB: goto K7GLI; goto dD0z3; WRAli: $limit = ($page - 1) * $rows . "\x2c" . $rows; goto Ll_eY; UBiCP: K7GLI: goto CIwFc; fFenq: foreach ($records as &$record) { goto gteD1; eIwCp: $record["\x61\143\164\x75\x61\154\x5f\163\x69\172\145"] = $actualSize; goto JjifZ; YhzWC: $actualPaidAmount = 0.0; goto kM8dH; rSdCt: $actualSize = Db::table("\146\x75\x6e\144\x73\137\x70\x61\162\x74\156\145\162\163")->where("\146\x75\156\144\x5f\151\144", $fundId)->sum("\141\x6d\x6f\x75\156\x74"); goto mG0Xr; YskQy: $record["\160\x72\x6f\x6a\x65\x63\x74\x5f\x61\155\x6f\x75\x6e\164"] = $projectStatistic["\x61\155\x6f\165\x6e\x74"]; goto h0_NL; JjifZ: $actualPaidAmount = Db::table("\146\x75\x6e\x64\163\137\x66\151\x6e\141\156\143\x65\137\143\x6f\156\x74\162\151\142\x75\x74\145\x73")->where("\146\x66\x63\x5f\151\x64", "\151\x6e", function ($query) use($fundId) { $query->table("\x66\x75\x6e\x64\x73\137\160\141\162\x74\156\145\162\163\137\160\x61\x69\144")->alias("\106\120\120")->join("\146\165\156\x64\163\x5f\160\141\162\164\x6e\145\162\x73\x20\106\x50", "\106\x50\120\x2e\146\x70\x5f\x69\x64\75\106\x50\56\x66\x70\137\x69\x64")->where("\x46\120\x2e\x66\165\x6e\x64\x5f\x69\144", $fundId)->field("\106\120\x50\x2e\146\x66\143\x5f\x69\144"); })->sum("\141\155\x6f\x75\x6e\x74"); goto fZCGa; kM8dH: EihNh: goto IE3q4; IE3q4: $record["\141\143\164\165\x61\x6c\137\160\141\151\144\x5f\163\x69\172\145"] = $actualPaidAmount; goto DOAwL; T_Mrl: $projectStatistic = $fundsFinanceLogic->getEnterpriseStatisticByFund($fundId); goto ujCTM; DOAwL: $record["\143\x6f\x6d\160\x61\156\x79\137\156\x61\x6d\145"] = "\170\x78\170\xe7\247\221\346\x8a\200\346\x8a\x95\xe8\xb5\204\347\xae\xa1\347\x90\206\346\x9c\211\351\231\220\xe5\205\xac\xe5\217\xb8"; goto KAGup; gteD1: $fundId = $record["\x66\x75\x6e\x64\137\x69\144"]; goto rSdCt; mG0Xr: if (!($actualSize === null)) { goto LnLKt; } goto Rk5jM; fZCGa: if (!($actualPaidAmount === null)) { goto EihNh; } goto YhzWC; ujCTM: $record["\160\x72\157\152\145\x63\x74\137\143\157\165\x6e\164"] = $projectStatistic["\x63\157\165\x6e\164"]; goto YskQy; Rk5jM: $actualSize = 0.0; goto QM52k; h0_NL: Bhzlz: goto U_tfR; QM52k: LnLKt: goto eIwCp; KAGup: $fundsFinanceLogic = FundsFinanceLogic::newObj(); goto T_Mrl; U_tfR: } goto YnI42; CIwFc: $conditions = []; goto MphUf; dD0z3: JfpxF: goto xxl8V; OJeRg: $records = Db::table("\146\x75\x6e\x64\x73")->where($conditions)->limit($limit)->order($order)->field(true)->select(); goto fFenq; MphUf: $totalCount = Db::table("\146\165\x6e\144\163")->where($conditions)->count(); goto OJeRg; xxl8V: $order = "\146\165\156\144\x5f\151\144\x20" . $order; goto UBiCP; YnI42: Zi18B: goto CyOmr; CyOmr: return ["\x74\x6f\164\141\154" => $totalCount, "\x72\157\167\163" => $records]; goto W22GC; W22GC: } }
