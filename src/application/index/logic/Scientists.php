<?php
 namespace app\index\logic; use think\Db; use think\Debug; use think\Log; use app\index\model\Scientists as ScientistsModel; class Scientists extends Base { public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = '', $order = '') { goto m4vF5; mk6t0: $conditions["\156\x61\155\x65"] = ["\154\151\x6b\145", "\45" . $search["\x6e\141\x6d\145"] . "\x25"]; goto cCX_e; wV0Mm: return ["\164\x6f\x74\141\x6c" => 0, "\162\x6f\x77\163" => []]; goto ZHJ5a; RV7vO: if (!empty($totalCount)) { goto OOUXs; } goto wV0Mm; m4vF5: if ($sort == "\151\x64") { goto oEUj8; } goto oQtwB; h7GQM: return ["\x74\157\x74\x61\x6c" => $totalCount, "\162\x6f\x77\x73" => $records]; goto iFFTi; ChbsX: goto K9EFQ; goto vBQZV; cCX_e: tH6aO: goto xR2U7; oQtwB: $order = "\x69\x64\40\144\145\163\143"; goto ChbsX; MoF0L: if (emptyInArray($search, "\156\141\155\x65")) { goto tH6aO; } goto mk6t0; J472N: $conditions = []; goto MoF0L; fgDEr: $records = Db::table("\163\143\x69\x65\x6e\164\x69\x73\x74\x73")->where($conditions)->page($page, $rows)->order($order)->field(true)->select(); goto R2zj2; xR2U7: $totalCount = Db::table("\x73\143\x69\145\156\164\151\x73\164\x73")->where($conditions)->count(); goto RV7vO; fwlyV: K9EFQ: goto J472N; vBQZV: oEUj8: goto nAiti; nAiti: $order = "\151\144\x20" . $order; goto fwlyV; nTo9J: zbFZQ: goto h7GQM; ZHJ5a: OOUXs: goto fgDEr; R2zj2: foreach ($records as &$record) { goto cYARt; c1wOv: Kbchv: goto LTzgW; wG9F6: $fields = explode("\x2c", $record["\x66\151\x65\x6c\x64"]); goto AIgys; wC2MQ: cRF8p: goto wG9F6; fNkGO: goto YkUtk; goto wC2MQ; cYARt: if ($record["\x66\151\145\x6c\x64"]) { goto cRF8p; } goto VjPPr; AIgys: $record["\x66\x69\145\154\144\x5f\164\145\170\164"] = implode("\x2c", Db::table("\x63\157\x6e\x66\x69\x67\137\163\x63\151\x65\x6e\x74\x69\x73\x74\x5f\x66\151\145\154\144")->where("\151\144", "\151\x6e", $fields)->column("\156\141\x6d\x65")); goto nOWk3; VjPPr: $record["\x66\151\145\154\144\x5f\164\145\170\x74"] = ''; goto fNkGO; nOWk3: YkUtk: goto c1wOv; LTzgW: } goto nTo9J; iFFTi: } public function save($id = 0, $infos) { goto Rs3Y7; iucEb: yVSNS: goto aN0D4; MQ1hA: $model = model("\123\143\x69\x65\x6e\164\151\163\164\x73"); goto hZ4CJ; oGWYw: muuGo: goto TX5zE; hZ4CJ: $model->data($infos); goto nH3v4; nH3v4: $model->allowField(true)->save(); goto i3s4f; aN0D4: if ($id) { goto dLNh6; } goto MQ1hA; lTrrY: dBl5S: goto ehc0K; ehc0K: $model->data($infos)->allowField(true)->save(); goto heotp; Rs3Y7: if (isset($infos["\146\x69\x65\154\144"]) && $infos["\146\151\x65\154\x64"] && is_array($infos["\x66\x69\x65\x6c\x64"])) { goto muuGo; } goto w96rs; TX5zE: $infos["\x66\151\145\154\x64"] = implode("\x2c", $infos["\x66\x69\x65\154\144"]); goto iucEb; lwHZP: dLNh6: goto aRQ5V; W8Ebg: if ($model) { goto dBl5S; } goto htgw5; w96rs: $infos["\x66\151\145\x6c\144"] = ''; goto JVvBT; JVvBT: goto yVSNS; goto oGWYw; aRQ5V: $model = ScientistsModel::get($id); goto W8Ebg; htgw5: exception("\xe6\227\240\346\263\x95\xe6\211\276\345\x88\xb0\350\257\xa5\347\xa7\221\xe5\xad\246\345\xae\266"); goto lTrrY; heotp: J6vst: goto pV9OX; i3s4f: goto J6vst; goto lwHZP; pV9OX: } public function delete($id) { goto BWuGf; BWuGf: $model = ScientistsModel::get($id); goto obAXp; tsJWc: $model->delete(); goto jBW_4; oIKbL: MYj4z: goto tsJWc; PW5R9: exception("\xe6\x97\xa0\xe6\xb3\x95\346\x89\xbe\345\210\260\xe8\257\245\347\247\221\xe5\255\xa6\xe5\xae\266"); goto oIKbL; obAXp: if ($model) { goto MYj4z; } goto PW5R9; jBW_4: } public function get($id) { goto DJkJK; w5ap4: $infos["\x66\151\x65\154\x64\137\x74\x65\170\x74"] = implode("\54", Db::table("\143\x6f\x6e\x66\151\x67\x5f\x73\143\x69\x65\156\x74\151\x73\x74\137\146\x69\145\154\144")->where("\151\144", "\151\x6e", $fields)->column("\156\x61\155\145")); goto nqYRt; dMz2t: $fields = explode("\54", $infos["\146\x69\x65\x6c\x64"]); goto w5ap4; Wl9Gh: goto Kx1xE; goto Hfu6p; DJkJK: $infos = Db::table("\x73\x63\x69\145\x6e\164\x69\163\x74\x73")->where("\x69\144", $id)->field(true)->find(); goto LvF3p; LvF3p: if ($infos) { goto cCP9A; } goto Kb1ie; ad4M5: if ($infos["\x66\151\x65\x6c\x64"]) { goto i1Jtn; } goto LgxUZ; LgxUZ: $infos["\x66\x69\x65\154\144\x5f\x74\145\x78\x74"] = ''; goto Wl9Gh; lQZOE: return $infos; goto FpZc8; Kb1ie: return false; goto XEAu6; nqYRt: Kx1xE: goto lQZOE; Hfu6p: i1Jtn: goto dMz2t; XEAu6: cCP9A: goto ad4M5; FpZc8: } public function getDefault() { return ["\x6e\x61\155\145" => '', "\x66\151\x65\154\x64" => '', "\160\154\141\x63\x65" => '', "\x63\157\x6e\164\141\143\x74\137\167\x61\171" => '', "\x62\x72\151\145\x66\x5f\x69\x6e\164\162\157\x64\165\x63\x74\x69\157\156" => '', "\x63\x6f\x72\145\137\x74\x65\x63\150" => '']; } }
