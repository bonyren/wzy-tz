<?php
 namespace app\index\logic; use think\Db; class Knowledges extends Base { const TABLE = "\x6b\x6e\157\167\154\145\x64\147\x65\163"; public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\x64", $order = "\144\145\163\143") { goto vqhdD; atrrl: return ["\164\x6f\164\141\x6c" => $count, "\x72\x6f\167\163" => $items]; goto crfr3; zIBhL: i0EVJ: goto swVKe; oRqhq: if (!empty($count)) { goto N_J7N; } goto bg05z; bcOjm: N_J7N: goto XnhvL; bg05z: return []; goto bcOjm; swVKe: $count = Db::table(self::TABLE)->where($where)->count(); goto oRqhq; egHhF: $where = ["\x64\145\154\145\164\145\144" => 0]; goto QGhOJ; QGhOJ: if (emptyInArray($search, "\x6e\x61\155\x65")) { goto i0EVJ; } goto EcF_z; vqhdD: $order = $sort . "\x20" . $order; goto egHhF; XnhvL: $items = Db::table(self::TABLE)->where($where)->page($page, $rows)->order($order)->select(); goto atrrl; EcF_z: $where["\156\141\155\145"] = ["\154\x69\153\145", "\45" . $search["\x6e\141\155\x65"] . "\45"]; goto zIBhL; crfr3: } public function getRow($id) { goto UvYSR; UvYSR: if (!empty($id)) { goto MUrrw; } goto Bof02; cg4F0: return $row; goto TlGwB; MTjT7: MUrrw: goto Erw3Q; Erw3Q: $row = Db::table(self::TABLE)->where("\151\x64", $id)->find(); goto cg4F0; Bof02: return false; goto MTjT7; TlGwB: } public function getDefaultRow() { return ["\156\x61\x6d\145" => '', "\144\145\x73\143\162\151\x70\164\x69\x6f\156" => '', "\151\144" => 0]; } public function saveRow($id, $data) { goto mU14w; llgjG: LfMi3: goto q9Kx1; dRDw3: vH9th: goto Ye0EW; symGi: oOc74: goto CaRCg; CaRCg: $data["\156\x61\x6d\x65"] = trim($data["\156\141\x6d\145"]); goto s2cQU; NU7gb: Db::table(self::TABLE)->where("\151\144", $id)->update($data); goto w6aSP; Ye0EW: $id = Db::table(self::TABLE)->insert($data, false, true); goto llgjG; edktu: exception("\346\231\xba\xe5\272\x93\345\x90\215\347\xa7\xb0\xe4\270\x8d\350\x83\275\344\xb8\xba\xe7\xa9\272"); goto dRDw3; vIVUU: exception("\xe6\231\272\xe5\xba\x93\345\x90\x8d\347\xa7\xb0\xe4\270\x8d\xe8\x83\xbd\xe4\270\xba\347\xa9\xba"); goto TCkin; w6aSP: goto LfMi3; goto symGi; mU14w: $data["\x63\162\x65\x61\x74\145\x64\x5f\x62\171"] = \app\index\service\RequestContext::I()->loginUserId; goto MJzj9; q9Kx1: return $id; goto zS3jK; yUhvh: if (!(isset($data["\x6e\x61\x6d\145"]) && empty($data["\156\x61\x6d\145"]))) { goto pbM9X; } goto vIVUU; MJzj9: if (empty($id)) { goto oOc74; } goto yUhvh; s2cQU: if (!empty($data["\156\x61\155\145"])) { goto vH9th; } goto edktu; TCkin: pbM9X: goto NU7gb; zS3jK: } public function delete($id) { $result = Db::table(self::TABLE)->where("\151\x64", $id)->setField("\x64\x65\x6c\x65\x74\x65\144", 1); return $result > 0 ? true : false; } }
