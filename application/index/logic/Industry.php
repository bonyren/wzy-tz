<?php
 namespace app\index\logic; use think\Db; class Industry extends Base { const TABLE = "\x69\156\144\x75\163\164\x72\151\145\x73"; public function load($search = array(), $page = 1, $rows = DEFAULT_PAGE_ROWS, $sort = "\x69\144", $order = "\x64\x65\163\x63") { goto B5fv6; nCwnp: return []; goto mKhjV; C0rbA: $items = Db::table(self::TABLE)->where($where)->page($page, $rows)->order($order)->select(); goto ztXE3; ryZuB: if (emptyInArray($search, "\x6e\141\155\x65")) { goto v5Sod; } goto ux5pK; ux5pK: $where["\x6e\x61\x6d\x65"] = ["\154\151\153\x65", "\x25" . $search["\x6e\x61\155\145"] . "\x25"]; goto qgIAv; mKhjV: ZoKyn: goto C0rbA; qgIAv: v5Sod: goto jBMyT; B5fv6: $order = $sort . "\x20" . $order; goto vyeH5; NQWBc: if (!empty($count)) { goto ZoKyn; } goto nCwnp; vyeH5: $where = ["\x64\x65\154\x65\164\145\144" => 0]; goto ryZuB; jBMyT: $count = Db::table(self::TABLE)->where($where)->count(); goto NQWBc; ztXE3: return ["\x74\x6f\x74\x61\x6c" => $count, "\x72\x6f\x77\x73" => $items]; goto CKudj; CKudj: } public function getRow($id) { goto xWyJL; koObc: return $row; goto RRFOv; DVno9: $row = Db::table(self::TABLE)->where("\x69\144", $id)->find(); goto koObc; xWyJL: if (!empty($id)) { goto VJMOQ; } goto bl2pN; bl2pN: return false; goto wzk_G; wzk_G: VJMOQ: goto DVno9; RRFOv: } public function getDefaultRow() { return ["\x6e\141\155\145" => '', "\x64\x65\163\143\x72\151\x70\164\x69\x6f\156" => '', "\151\x64" => 0, "\143\157\162\x65\137\x64\x61\164\141" => '']; } public function saveRow($id, $data) { goto bMytY; bMytY: $data["\143\162\x65\141\x74\145\x64\137\x62\x79"] = \app\index\service\RequestContext::I()->loginUserId; goto fpZvV; gx_9d: $data["\156\141\155\x65"] = trim($data["\156\141\155\x65"]); goto Ts7nH; lRqAg: if (!(isset($data["\x6e\141\x6d\145"]) && empty($data["\x6e\141\x6d\x65"]))) { goto h7mMX; } goto rc09a; RROYN: $id = Db::table(self::TABLE)->insert($data, false, true); goto YOSFh; M6PrT: exception("\xe8\xa1\x8c\xe4\xb8\232\xe5\220\x8d\xe7\247\260\xe4\xb8\215\xe8\203\275\xe4\270\272\347\251\xba"); goto rnDCE; rc09a: exception("\350\xa1\x8c\xe4\270\232\xe5\x90\x8d\xe7\xa7\260\344\xb8\x8d\xe8\203\275\344\xb8\xba\xe7\xa9\272"); goto cHxsV; t7sFU: return $id; goto PZNH_; YOSFh: ZtBBI: goto t7sFU; cHxsV: h7mMX: goto XzcMN; fpZvV: if (empty($id)) { goto WuXiF; } goto lRqAg; rnDCE: al8y0: goto RROYN; Ts7nH: if (!empty($data["\x6e\141\x6d\x65"])) { goto al8y0; } goto M6PrT; kWmmv: goto ZtBBI; goto LAmgv; LAmgv: WuXiF: goto gx_9d; XzcMN: Db::table(self::TABLE)->where("\x69\x64", $id)->update($data); goto kWmmv; PZNH_: } public function delete($id) { $result = Db::table(self::TABLE)->where("\x69\x64", $id)->setField("\144\145\x6c\145\x74\x65\x64", 1); return $result > 0 ? true : false; } }
