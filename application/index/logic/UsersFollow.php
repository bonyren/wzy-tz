<?php
 namespace app\index\logic; use think\Db; use think\Session; class UsersFollow extends Base { const TYPE_PROJECT = 1; public function addFollow($target_type, $target_id, $user_id = 0) { goto HfOD2; HfOD2: if (!empty($user_id)) { goto YOfnn; } goto l6Bvd; D00sI: Db::table("\x75\x73\145\x72\163\x5f\146\157\154\x6c\x6f\x77")->insert(["\x75\x73\x65\x72\137\151\144" => $user_id, "\x74\141\162\147\145\164\137\x74\x79\160\145" => $target_type, "\x74\x61\x72\147\145\164\x5f\x69\x64" => $target_id]); goto SCa7V; BX4TH: YOfnn: goto D00sI; l6Bvd: $user_id = Session::get("\x75\163\145\162\151\144"); goto BX4TH; SCa7V: } public function cancelFollow($target_type, $target_id, $user_id = 0) { goto f4AhA; KZ0Ep: Db::table("\x75\x73\x65\162\163\137\x66\157\x6c\x6c\x6f\x77")->where(["\165\163\145\x72\x5f\x69\144" => $user_id, "\x74\x61\x72\x67\145\x74\137\x74\171\160\145" => $target_type, "\164\x61\162\x67\145\x74\x5f\x69\144" => $target_id])->delete(); goto EQnwo; woyOJ: $user_id = Session::get("\x75\x73\x65\162\x69\x64"); goto rCYL2; f4AhA: if (!empty($user_id)) { goto iiDXT; } goto woyOJ; rCYL2: iiDXT: goto KZ0Ep; EQnwo: } public function getMyFollows($target_type = 0, $user_id = 0) { goto Qy2b6; S0y5j: if ($target_type) { goto lQx83; } goto ZhgHj; TjMyV: $where["\x75\x73\145\x72\137\151\144"] = $user_id; goto S0y5j; lIuZV: $where["\x74\141\x72\147\145\x74\137\x74\171\160\145"] = $target_type; goto RevlJ; UVSGE: $user_id = Session::get("\x75\163\x65\x72\x69\x64"); goto Aq3na; f_gul: if (!empty($user_id)) { goto kV0jz; } goto UVSGE; Qy2b6: $where = []; goto f_gul; Aq3na: kV0jz: goto TjMyV; RevlJ: $rows = Db::table("\x75\x73\x65\x72\163\x5f\146\x6f\x6c\154\157\167")->where($where)->column("\151\144\x2c\164\141\162\147\x65\x74\x5f\x74\x79\160\x65", "\x74\141\162\147\145\164\x5f\x69\x64"); goto x6CZm; MAam3: $rows = []; goto C9BI0; ZQR8m: if (!empty($rows)) { goto ta4Hi; } goto MAam3; Pbnd8: return $rows; goto AmcQN; npTpA: lQx83: goto lIuZV; nXgT6: goto XtGOQ; goto npTpA; ZhgHj: $rows = Db::table("\x75\x73\x65\x72\x73\137\146\157\x6c\x6c\x6f\167")->field("\164\x61\x72\147\145\x74\137\164\171\160\x65\54\164\141\162\147\145\x74\137\151\x64")->where($where)->select(); goto nXgT6; C9BI0: ta4Hi: goto Pbnd8; x6CZm: XtGOQ: goto ZQR8m; AmcQN: } }
