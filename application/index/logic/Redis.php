<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; class Redis extends Base { protected function __construct() { parent::__construct(); } public static function genDdKey($fundId, $enterpriseId) { $key = "\x44\104\x5f{$fundId}\x5f{$enterpriseId}"; return $key; } public function setData($key, $jsonStr) { goto FdQMx; lr98d: j5Sc8: goto ix_oe; kFYYF: Db::table("\x72\x65\144\x69\x73")->where("\153\x65\171", $key)->update(["\x76\x61\154\x75\145" => $jsonStr]); goto lr98d; ZY3G0: if ($existCount > 0) { goto fHL8s; } goto aPqcb; FdQMx: $existCount = Db::table("\162\145\144\x69\x73")->where("\x6b\x65\x79", $key)->count(); goto ZY3G0; PFCZI: goto j5Sc8; goto uOOzP; uOOzP: fHL8s: goto kFYYF; aPqcb: Db::table("\x72\x65\x64\151\x73")->insert(["\153\145\171" => $key, "\166\141\x6c\165\145" => $jsonStr]); goto PFCZI; ix_oe: } public function getData($key) { $jsonStr = Db::table("\x72\145\x64\151\163")->where("\x6b\x65\171", $key)->value("\x76\x61\154\x75\x65"); return $jsonStr; } }
