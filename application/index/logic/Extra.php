<?php
 namespace app\index\logic; use app\index\model\Extras; class Extra extends Base { private $model; protected function __construct() { parent::__construct(); $this->model = new Extras(); } public function setValue($module, $record_id, $key, $value = null) { goto B7jl9; Q950c: return false; goto IlhOU; B7jl9: $data = is_null($value) ? $key : [$key => $value]; goto vGUn1; IlhOU: t83Z7: goto jGAiY; jGAiY: foreach ($data as $k => $v) { goto ggejs; nSfso: UPpBb: goto Ia6NH; r7XO6: $v = json_encode($v, JSON_UNESCAPED_UNICODE); goto nSfso; jugkW: eF5F2: goto hJlKi; Hnxbl: BI98Q: goto uKqvN; SP96z: goto GR91X; goto Hnxbl; O0_8o: $extra = new Extras(["\155\x6f\144\x75\x6c\x65" => $module, "\x72\145\143\157\x72\144\x5f\x69\144" => $record_id, "\x6b\x65\x79" => $k, "\166\x61\154\165\x65" => $v, "\151\x73\x5f\152\x73\x6f\156" => $is_json]); goto xbH6X; Ia6NH: if ($id) { goto BI98Q; } goto nddZO; AO01M: if (is_array($v)) { goto J180N; } goto U8IN7; uKqvN: if ($v === '') { goto eF5F2; } goto yFCcD; RaFo2: goto R5YfE; goto jugkW; X2f3i: GR91X: goto mtXYO; ggejs: $id = Extras::get(["\155\x6f\x64\165\154\145" => $module, "\162\x65\143\x6f\x72\144\x5f\x69\144" => $record_id, "\153\145\171" => $k])->id; goto AO01M; nddZO: if ($v !== '') { goto FFd0t; } goto SP96z; mtXYO: iKy6r: goto Gwkfo; hJlKi: Extras::destroy($id); goto rNSE0; ixNDK: goto GR91X; goto E_Vbn; xbH6X: $extra->save(); goto X2f3i; U8IN7: $is_json = 0; goto CxQbQ; r6K2N: goto UPpBb; goto NuEey; NuEey: J180N: goto NFVKq; CxQbQ: $v = trim($v); goto r6K2N; E_Vbn: FFd0t: goto O0_8o; NFVKq: $is_json = 1; goto r7XO6; rNSE0: R5YfE: goto ixNDK; yFCcD: Extras::where("\151\144", $id)->update(["\166\141\154\x75\145" => $v, "\x69\x73\x5f\x6a\163\x6f\x6e" => $is_json]); goto RaFo2; Gwkfo: } goto Ma3QO; XZTxi: return true; goto rX4pU; YZZSh: xv2er: goto iAFEg; iAFEg: if (is_array($data)) { goto t83Z7; } goto Q950c; vGUn1: if (!empty($data)) { goto xv2er; } goto AB4NX; Ma3QO: xGOFR: goto XZTxi; AB4NX: return false; goto YZZSh; rX4pU: } public function getValue($module, $record_id, $key = '') { goto L7KP1; f5XJ6: if (!$key) { goto lQfMX; } goto cBaiW; y0N90: return $data; goto wEcHR; HcFL2: $map["\153\145\171"] = $key; goto HiJ6V; exa0Q: bwJzo: goto f5XJ6; BrM4y: return []; goto rIasR; cBaiW: $data = $data[$key]; goto vD0rs; sK4Pt: $data = Extras::where($map)->column("\x6b\x65\171\x2c\166\141\x6c\165\x65\x2c\x69\163\x5f\x6a\163\x6f\x6e", "\153\x65\x79"); goto Da2r5; L7KP1: $map = ["\155\157\x64\165\x6c\x65" => $module, "\162\145\x63\157\x72\144\137\151\144" => $record_id]; goto SUfO3; SUfO3: if (!$key) { goto OG30I; } goto HcFL2; HiJ6V: OG30I: goto sK4Pt; rIasR: PQsjd: goto n0Nb5; vD0rs: lQfMX: goto y0N90; Da2r5: if (!empty($data)) { goto PQsjd; } goto BrM4y; n0Nb5: foreach ($data as $k => $v) { goto d8gk3; ecB1z: g8DC0: goto P8Ol_; P8Ol_: $data[$k] = $v["\166\x61\x6c\165\x65"]; goto j5KG0; j5KG0: Skpob: goto v74i3; d8gk3: if (!$v["\151\163\x5f\x6a\163\x6f\156"]) { goto g8DC0; } goto GL5g2; GL5g2: $v["\166\x61\x6c\165\145"] = json_decode($v["\166\x61\154\165\145"], true); goto ecB1z; v74i3: } goto exa0Q; wEcHR: } public function removeKey($module, $record_id, $key) { Extras::where(["\x6d\x6f\144\x75\154\x65" => $module, "\x72\x65\x63\x6f\x72\x64\x5f\x69\x64" => $record_id, "\x6b\x65\171" => $key])->delete(); } }
