<?php
 namespace app\index\logic; use app\index\model\Setting; use think\Debug; use think\Db; use think\Log; use think\Request; use think\Session; class WorkStatus extends Base { public function getInfos($category, $recordId) { $infos = Db::table("\167\x6f\x72\153\x5f\163\164\141\x74\x75\x73")->where(["\143\141\x74\x65\x67\157\x72\x79" => $category, "\162\x65\143\157\162\144\x5f\151\144" => $recordId])->field(true)->find(); return $infos; } public function save($category, $recordId, $infos) { goto NdPDC; XD2WX: $model->status = !emptyInArray($infos, "\163\164\141\x74\x75\x73") ? $infos["\x73\x74\141\x74\165\163"] : \app\index\model\WorkStatus::WORK_WORKING_STATUS; goto WIbfM; Jo3ve: \app\index\logic\Milestones::newObj()->save(\app\index\model\Milestones::MILESTONE_FUND_CATEGORY, $recordId, $datas["\146\x69\156\151\163\150\145\x64\137\144\x61\x74\145"], "\xe5\xb7\245\345\x95\206\xe6\xb3\xa8\345\206\214\xe5\xae\214\xe6\x88\x90"); goto nMytL; gN7HR: $model = \app\index\model\WorkStatus::get(["\x63\141\164\145\147\x6f\162\171" => $category, "\162\145\143\x6f\162\144\x5f\x69\x64" => $recordId]); goto Hf0cR; R1avY: $model->workers = !emptyInArray($infos, "\167\x6f\x72\x6b\x65\x72\163") ? $infos["\x77\x6f\x72\153\x65\x72\x73"] : ''; goto XD2WX; mc6sQ: $model->data($datas); goto t3fh_; HTzTw: if (!($datas["\163\x74\141\164\x75\163"] == \app\index\model\WorkStatus::WORK_FINISHED_STATUS)) { goto Hmcsf; } goto S0aID; PVXe6: $model->record_id = $recordId; goto R1avY; lkcsF: $datas["\x77\157\x72\153\x65\x72\163"] = !emptyInArray($infos, "\x77\x6f\x72\x6b\145\162\x73") ? $infos["\x77\x6f\162\x6b\145\162\163"] : ''; goto AAKaz; EH0wn: efYJ_: goto yRt8y; AAKaz: $datas["\163\x74\141\164\x75\163"] = !emptyInArray($infos, "\163\164\x61\164\165\163") ? $infos["\x73\164\x61\x74\165\x73"] : \app\index\model\WorkStatus::WORK_WORKING_STATUS; goto thvEF; t3fh_: $model->save(); goto HTzTw; LVPwh: Hmcsf: goto nmp5y; PdVpX: if (!($model->status == \app\index\model\WorkStatus::WORK_WORKING_STATUS && $datas["\x73\x74\141\x74\165\x73"] == \app\index\model\WorkStatus::WORK_FINISHED_STATUS)) { goto FpPoJ; } goto BPSKx; pkV2g: $datas["\143\141\x74\x65\x67\x6f\x72\x79"] = $category; goto OJKwP; OJKwP: $datas["\x72\x65\143\x6f\162\x64\137\151\x64"] = $recordId; goto s_uQE; WIbfM: $model->finished_date = !emptyInArray($infos, "\x66\151\156\151\x73\150\x65\x64\x5f\x64\141\164\145") ? $infos["\x66\x69\156\151\x73\150\x65\x64\x5f\x64\141\164\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto O_GMG; thvEF: $datas["\146\151\156\x69\163\x68\145\x64\137\144\x61\164\x65"] = !emptyInArray($infos, "\x66\151\x6e\151\x73\x68\x65\x64\x5f\144\x61\x74\x65") ? $infos["\x66\151\156\151\x73\x68\x65\x64\x5f\x64\141\x74\x65"] : Defs::DEFAULT_DB_DATE_VALUE; goto gN7HR; nmp5y: goto efYJ_; goto PYgaU; s_uQE: $model = model("\127\157\162\x6b\x53\164\x61\164\x75\163"); goto mc6sQ; O_GMG: $model->save(); goto EH0wn; nMytL: FpPoJ: goto aeSfe; Hf0cR: if ($model) { goto AU2aT; } goto pkV2g; BPSKx: \app\index\logic\Milestones::newObj()->delete(\app\index\model\Milestones::MILESTONE_FUND_CATEGORY, $recordId); goto Jo3ve; Qtdyo: \app\index\logic\Milestones::newObj()->save(\app\index\model\Milestones::MILESTONE_FUND_CATEGORY, $recordId, $datas["\x66\151\156\x69\163\x68\x65\144\x5f\144\141\164\145"], "\xe5\xb7\245\345\x95\x86\346\263\250\xe5\x86\x8c\xe5\xae\x8c\346\210\220"); goto LVPwh; aeSfe: $model->category = $category; goto PVXe6; PYgaU: AU2aT: goto PdVpX; NdPDC: $datas = []; goto lkcsF; S0aID: \app\index\logic\Milestones::newObj()->delete(\app\index\model\Milestones::MILESTONE_FUND_CATEGORY, $recordId); goto Qtdyo; yRt8y: } }
